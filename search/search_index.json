{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"k8smith","text":"<p>A transparent, lightweight Kubernetes manifest generator.</p>"},{"location":"#philosophy","title":"Philosophy","text":"<ul> <li>Transparency over abstraction \u2014 Generated YAML is predictable; no hidden defaults</li> <li>Composition over inheritance \u2014 Build complex resources from simple pieces</li> <li>Type safety at the boundary \u2014 Validate inputs with Pydantic, output plain dicts</li> <li>Cloud-agnostic core \u2014 Vanilla K8s resources work anywhere; cloud extensions are optional</li> </ul>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install k8smith\n# or\nuv add k8smith\n</code></pre>"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code>from k8smith import (\n    DeploymentSpec,\n    Container,\n    PodSpec,\n    PodTemplateSpec,\n    ResourceRequirements,\n    ResourceQuantity,\n    build_deployment,\n    Manifest,\n)\n\nspec = DeploymentSpec(\n    name=\"web\",\n    namespace=\"production\",\n    replicas=3,\n    template=PodTemplateSpec(\n        spec=PodSpec(\n            containers=[\n                Container(\n                    name=\"web\",\n                    image=\"nginx:1.25\",\n                    resources=ResourceRequirements(\n                        requests=ResourceQuantity(cpu=\"100m\", memory=\"128Mi\"),\n                        limits=ResourceQuantity(memory=\"256Mi\"),\n                    ),\n                )\n            ]\n        )\n    ),\n)\n\ndeployment = build_deployment(spec)\n\nmanifest = Manifest()\nmanifest.add(deployment)\nprint(manifest.to_yaml())\n</code></pre>"},{"location":"#why-not-cdk8s","title":"Why not cdk8s?","text":"<p>k8smith was created to replace cdk8s after encountering these issues:</p> cdk8s Problem k8smith Solution <code>Size.gibibytes(6)</code> outputs <code>6144Mi</code> Strings stay as strings: <code>\"6Gi\"</code> Can't add <code>nvidia.com/gpu</code> via resources Built into <code>ResourceQuantity.extended</code> Adds <code>hostNetwork: false</code> when not set Only outputs what you specify Requires label cleanup post-processing No generated labels JSII/Node.js dependency Pure Python"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Getting Started \u2014 Installation and basic usage</li> <li>Production Web App Guide \u2014 Complete example with all best practices</li> <li>API Reference \u2014 Full API documentation</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#installation","title":"Installation","text":"pipuvpoetry <pre><code>pip install k8smith\n</code></pre> <pre><code>uv add k8smith\n</code></pre> <pre><code>poetry add k8smith\n</code></pre>"},{"location":"getting-started/#basic-usage","title":"Basic Usage","text":""},{"location":"getting-started/#creating-a-deployment","title":"Creating a Deployment","text":"<pre><code>from k8smith import (\n    DeploymentSpec,\n    Container,\n    PodSpec,\n    PodTemplateSpec,\n    build_deployment,\n)\n\nspec = DeploymentSpec(\n    name=\"nginx\",\n    namespace=\"default\",\n    replicas=2,\n    template=PodTemplateSpec(\n        spec=PodSpec(\n            containers=[\n                Container(name=\"nginx\", image=\"nginx:1.25\")\n            ]\n        )\n    ),\n)\n\ndeployment = build_deployment(spec)\n</code></pre>"},{"location":"getting-started/#creating-a-service","title":"Creating a Service","text":"<pre><code>from k8smith import ServiceSpec, ServicePort, build_service\n\nspec = ServiceSpec(\n    name=\"nginx\",\n    namespace=\"default\",\n    selector={\"app\": \"nginx\"},\n    ports=[ServicePort(port=80, target_port=80)],\n)\n\nservice = build_service(spec)\n</code></pre>"},{"location":"getting-started/#creating-an-ingress","title":"Creating an Ingress","text":"<pre><code>from k8smith import IngressSpec, IngressRule, IngressTLS, build_ingress\n\nspec = IngressSpec(\n    name=\"web-ingress\",\n    namespace=\"default\",\n    rules=[\n        IngressRule(\n            host=\"example.com\",\n            http={\n                \"paths\": [\n                    {\n                        \"path\": \"/\",\n                        \"pathType\": \"Prefix\",\n                        \"backend\": {\"service\": {\"name\": \"nginx\", \"port\": {\"number\": 80}}},\n                    }\n                ]\n            },\n        )\n    ],\n)\n\ningress = build_ingress(spec)\n</code></pre> <p>To target a specific ingress controller, use <code>ingress_class_name</code>:</p> <pre><code>spec = IngressSpec(\n    name=\"web-ingress\",\n    namespace=\"default\",\n    ingress_class_name=\"traefik\",  # or: haproxy, contour, etc.\n    rules=[...],\n)\n</code></pre> <p>With TLS:</p> <pre><code>spec = IngressSpec(\n    name=\"secure-ingress\",\n    namespace=\"default\",\n    annotations={\"cert-manager.io/cluster-issuer\": \"letsencrypt-prod\"},\n    tls=[IngressTLS(hosts=[\"example.com\"], secret_name=\"example-tls\")],\n    rules=[\n        IngressRule(\n            host=\"example.com\",\n            http={\n                \"paths\": [\n                    {\n                        \"path\": \"/\",\n                        \"pathType\": \"Prefix\",\n                        \"backend\": {\"service\": {\"name\": \"nginx\", \"port\": {\"number\": 80}}},\n                    }\n                ]\n            },\n        )\n    ],\n)\n</code></pre>"},{"location":"getting-started/#combining-resources-with-manifest","title":"Combining Resources with Manifest","text":"<pre><code>from k8smith import Manifest\n\nmanifest = Manifest()\nmanifest.add(deployment)\nmanifest.add(service)\n\n# Output as YAML\nprint(manifest.to_yaml())\n\n# Or write to file\nmanifest.to_file(\"manifests/nginx.yaml\")\n</code></pre>"},{"location":"getting-started/#resource-requests-and-limits","title":"Resource Requests and Limits","text":"<pre><code>from k8smith import Container, ResourceRequirements, ResourceQuantity\n\ncontainer = Container(\n    name=\"app\",\n    image=\"myapp:v1\",\n    resources=ResourceRequirements(\n        requests=ResourceQuantity(cpu=\"100m\", memory=\"128Mi\"),\n        limits=ResourceQuantity(cpu=\"500m\", memory=\"512Mi\"),\n    ),\n)\n</code></pre>"},{"location":"getting-started/#gpu-support","title":"GPU Support","text":"<p>k8smith makes it easy to request GPU resources:</p> <pre><code>from k8smith import ResourceQuantity\n\nresources = ResourceRequirements(\n    requests=ResourceQuantity(memory=\"4Gi\"),\n    limits=ResourceQuantity(\n        memory=\"8Gi\",\n        extended={\"nvidia.com/gpu\": \"1\"},\n    ),\n)\n</code></pre>"},{"location":"getting-started/#available-resources","title":"Available Resources","text":""},{"location":"getting-started/#core-kubernetes","title":"Core Kubernetes","text":"Resource Spec Class Builder Function Deployment <code>DeploymentSpec</code> <code>build_deployment()</code> Service <code>ServiceSpec</code> <code>build_service()</code> Ingress <code>IngressSpec</code> <code>build_ingress()</code> StatefulSet <code>StatefulSetSpec</code> <code>build_statefulset()</code> DaemonSet <code>DaemonSetSpec</code> <code>build_daemonset()</code> CronJob <code>CronJobSpec</code> <code>build_cronjob()</code> ConfigMap <code>ConfigMapSpec</code> <code>build_configmap()</code> Secret <code>SecretSpec</code> <code>build_secret()</code> HPA <code>HPASpec</code> <code>build_hpa()</code> PDB <code>PDBSpec</code> <code>build_pdb()</code> ServiceAccount <code>ServiceAccountSpec</code> <code>build_serviceaccount()</code> Namespace <code>NamespaceSpec</code> <code>build_namespace()</code> Role <code>RoleSpec</code> <code>build_role()</code> ClusterRole <code>ClusterRoleSpec</code> <code>build_clusterrole()</code> RoleBinding <code>RoleBindingSpec</code> <code>build_rolebinding()</code> ClusterRoleBinding <code>ClusterRoleBindingSpec</code> <code>build_clusterrolebinding()</code>"},{"location":"getting-started/#gke-extensions","title":"GKE Extensions","text":"Resource Spec Class Builder Function Gateway <code>GatewaySpec</code> <code>build_gateway()</code> HTTPRoute <code>HTTPRouteSpec</code> <code>build_httproute()</code> HealthCheckPolicy <code>HealthCheckPolicySpec</code> <code>build_healthcheckpolicy()</code> GCPBackendPolicy <code>GCPBackendPolicySpec</code> <code>build_gcp_backend_policy()</code> PodMonitoring <code>PodMonitoringSpec</code> <code>build_pod_monitoring()</code> ClusterPodMonitoring <code>ClusterPodMonitoringSpec</code> <code>build_cluster_pod_monitoring()</code>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Production Web App Guide \u2014 Complete example</li> <li>RBAC Guide \u2014 Setting up roles and permissions</li> <li>GKE Guide \u2014 GKE-specific resources</li> </ul>"},{"location":"api/builders/","title":"Core Builders","text":"<p>Builder functions that convert spec models into Kubernetes manifest dictionaries.</p>"},{"location":"api/builders/#custom-resources","title":"Custom Resources","text":"<p>Use <code>ResourceBuilder</code> to create builders for custom Kubernetes resources:</p> <pre><code>from k8smith import ResourceBuilder, KubeModel\nfrom pydantic import Field\n\nclass MyCustomSpec(KubeModel):\n    name: str\n    namespace: str = \"default\"\n    replicas: int = 1\n    custom_field: str = Field(alias=\"customField\")\n\ndef build_my_resource(spec: MyCustomSpec) -&gt; dict:\n    return ResourceBuilder.build(spec, \"example.com/v1\", \"MyResource\")\n\n# Usage\nspec = MyCustomSpec(name=\"my-app\", custom_field=\"value\")\nmanifest = build_my_resource(spec)\n</code></pre>"},{"location":"api/builders/#k8smith.core.builder.ResourceBuilder","title":"<code>ResourceBuilder</code>","text":"<p>Generic builder for Kubernetes resources.</p> <p>Handles the common pattern of building K8s resources by: 1. Creating the base structure (apiVersion, kind, metadata, spec) 2. Routing fields to the appropriate location based on field name 3. Auto-transforming nested KubeModel instances to dicts</p> <p>Examples:</p> <p>Simple resource (all fields go to spec):</p> <pre><code>&gt;&gt;&gt; ResourceBuilder.build(spec, \"v1\", \"Service\")\n</code></pre> <p>Metadata-only resource (no spec section):</p> <pre><code>&gt;&gt;&gt; ResourceBuilder.build(spec, \"v1\", \"Namespace\", include_spec=False)\n</code></pre> <p>Resource with top-level fields (RBAC):</p> <pre><code>&gt;&gt;&gt; ResourceBuilder.build(spec, \"rbac.authorization.k8s.io/v1\", \"Role\",\n...                       top_level_fields={\"rules\"})\n</code></pre> <p>Resource with custom field handling:</p> <pre><code>&gt;&gt;&gt; ResourceBuilder.build(spec, \"apps/v1\", \"Deployment\",\n...                       skip_fields={\"selector\", \"template\"})\n</code></pre> Source code in <code>src/k8smith/core/builder.py</code> <pre><code>class ResourceBuilder:\n    \"\"\"Generic builder for Kubernetes resources.\n\n    Handles the common pattern of building K8s resources by:\n    1. Creating the base structure (apiVersion, kind, metadata, spec)\n    2. Routing fields to the appropriate location based on field name\n    3. Auto-transforming nested KubeModel instances to dicts\n\n    Examples:\n        Simple resource (all fields go to spec):\n        &gt;&gt;&gt; ResourceBuilder.build(spec, \"v1\", \"Service\")\n\n        Metadata-only resource (no spec section):\n        &gt;&gt;&gt; ResourceBuilder.build(spec, \"v1\", \"Namespace\", include_spec=False)\n\n        Resource with top-level fields (RBAC):\n        &gt;&gt;&gt; ResourceBuilder.build(spec, \"rbac.authorization.k8s.io/v1\", \"Role\",\n        ...                       top_level_fields={\"rules\"})\n\n        Resource with custom field handling:\n        &gt;&gt;&gt; ResourceBuilder.build(spec, \"apps/v1\", \"Deployment\",\n        ...                       skip_fields={\"selector\", \"template\"})\n    \"\"\"\n\n    METADATA_FIELDS = {\"name\", \"namespace\", \"labels\", \"annotations\"}\n\n    @classmethod\n    def build(\n        cls,\n        spec: KubeModel,\n        api_version: str,\n        kind: str,\n        *,\n        include_spec: bool = True,\n        top_level_fields: set[str] | None = None,\n        skip_fields: set[str] | None = None,\n    ) -&gt; dict[str, Any]:\n        \"\"\"Build a Kubernetes resource from a spec model.\n\n        Args:\n            spec: The specification model (e.g., ServiceSpec, IngressSpec)\n            api_version: Kubernetes API version (e.g., \"v1\", \"apps/v1\")\n            kind: Resource kind (e.g., \"Service\", \"Deployment\")\n            include_spec: Whether to include a spec section (False for Namespace)\n            top_level_fields: Field names that go at resource root, not in spec\n                             (e.g., {\"rules\"} for Role, {\"roleRef\", \"subjects\"} for RoleBinding)\n            skip_fields: Field names to skip (handled manually by the caller)\n\n        Returns:\n            Kubernetes resource as a dict ready for YAML serialization\n        \"\"\"\n        resource: dict[str, Any] = {\n            \"apiVersion\": api_version,\n            \"kind\": kind,\n            \"metadata\": {},\n        }\n        if include_spec:\n            resource[\"spec\"] = {}\n\n        top_level_fields = top_level_fields or set()\n        skip_fields = skip_fields or set()\n\n        for field_name, field_info in type(spec).model_fields.items():\n            if field_name in skip_fields:\n                continue\n\n            val = getattr(spec, field_name)\n            if val is None:\n                continue\n\n            # Get the Kubernetes field name (alias or original)\n            key = field_info.alias or field_name\n\n            # Auto-transform nested models to dicts\n            val = cls._transform_value(val)\n\n            # Route to the appropriate location\n            if field_name in cls.METADATA_FIELDS:\n                if val:  # Skip empty labels/annotations\n                    resource[\"metadata\"][key] = val\n            elif field_name in top_level_fields:\n                resource[key] = val\n            elif include_spec:\n                resource[\"spec\"][key] = val\n\n        return resource\n\n    @classmethod\n    def _transform_value(cls, val: Any) -&gt; Any:\n        \"\"\"Transform KubeModel instances to dicts recursively.\n\n        Handles both single KubeModel instances and lists of them.\n        \"\"\"\n        if isinstance(val, KubeModel):\n            return val.to_dict()\n        elif isinstance(val, list) and val and isinstance(val[0], KubeModel):\n            return [v.to_dict() for v in val]\n        return val\n</code></pre>"},{"location":"api/builders/#k8smith.core.builder.ResourceBuilder.build","title":"<code>build(spec, api_version, kind, *, include_spec=True, top_level_fields=None, skip_fields=None)</code>  <code>classmethod</code>","text":"<p>Build a Kubernetes resource from a spec model.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>KubeModel</code> <p>The specification model (e.g., ServiceSpec, IngressSpec)</p> required <code>api_version</code> <code>str</code> <p>Kubernetes API version (e.g., \"v1\", \"apps/v1\")</p> required <code>kind</code> <code>str</code> <p>Resource kind (e.g., \"Service\", \"Deployment\")</p> required <code>include_spec</code> <code>bool</code> <p>Whether to include a spec section (False for Namespace)</p> <code>True</code> <code>top_level_fields</code> <code>set[str] | None</code> <p>Field names that go at resource root, not in spec              (e.g., {\"rules\"} for Role, {\"roleRef\", \"subjects\"} for RoleBinding)</p> <code>None</code> <code>skip_fields</code> <code>set[str] | None</code> <p>Field names to skip (handled manually by the caller)</p> <code>None</code> <p>Returns:</p> Type Description <code>dict[str, Any]</code> <p>Kubernetes resource as a dict ready for YAML serialization</p> Source code in <code>src/k8smith/core/builder.py</code> <pre><code>@classmethod\ndef build(\n    cls,\n    spec: KubeModel,\n    api_version: str,\n    kind: str,\n    *,\n    include_spec: bool = True,\n    top_level_fields: set[str] | None = None,\n    skip_fields: set[str] | None = None,\n) -&gt; dict[str, Any]:\n    \"\"\"Build a Kubernetes resource from a spec model.\n\n    Args:\n        spec: The specification model (e.g., ServiceSpec, IngressSpec)\n        api_version: Kubernetes API version (e.g., \"v1\", \"apps/v1\")\n        kind: Resource kind (e.g., \"Service\", \"Deployment\")\n        include_spec: Whether to include a spec section (False for Namespace)\n        top_level_fields: Field names that go at resource root, not in spec\n                         (e.g., {\"rules\"} for Role, {\"roleRef\", \"subjects\"} for RoleBinding)\n        skip_fields: Field names to skip (handled manually by the caller)\n\n    Returns:\n        Kubernetes resource as a dict ready for YAML serialization\n    \"\"\"\n    resource: dict[str, Any] = {\n        \"apiVersion\": api_version,\n        \"kind\": kind,\n        \"metadata\": {},\n    }\n    if include_spec:\n        resource[\"spec\"] = {}\n\n    top_level_fields = top_level_fields or set()\n    skip_fields = skip_fields or set()\n\n    for field_name, field_info in type(spec).model_fields.items():\n        if field_name in skip_fields:\n            continue\n\n        val = getattr(spec, field_name)\n        if val is None:\n            continue\n\n        # Get the Kubernetes field name (alias or original)\n        key = field_info.alias or field_name\n\n        # Auto-transform nested models to dicts\n        val = cls._transform_value(val)\n\n        # Route to the appropriate location\n        if field_name in cls.METADATA_FIELDS:\n            if val:  # Skip empty labels/annotations\n                resource[\"metadata\"][key] = val\n        elif field_name in top_level_fields:\n            resource[key] = val\n        elif include_spec:\n            resource[\"spec\"][key] = val\n\n    return resource\n</code></pre>"},{"location":"api/builders/#workloads","title":"Workloads","text":""},{"location":"api/builders/#k8smith.core.deployment.build_deployment","title":"<code>build_deployment(spec)</code>","text":"<p>Build a Kubernetes Deployment resource.</p> <p>Note: selector and template are handled manually because: 1. selector must be wrapped as {\"matchLabels\": ...} in output 2. selector labels must be merged into template.metadata.labels    (Kubernetes requires pod labels to match the selector) 3. selector auto-generates from spec.name if not provided These cross-field dependencies can't be expressed in ResourceBuilder.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>DeploymentSpec</code> <p>Deployment specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes Deployment resource as a dict</p> Example <p>from k8smith.core.models import ( ...     Container, DeploymentSpec, PodSpec, PodTemplateSpec, ... ) spec = DeploymentSpec( ...     name=\"web\", ...     namespace=\"production\", ...     replicas=3, ...     template=PodTemplateSpec( ...         spec=PodSpec( ...             containers=[Container(name=\"web\", image=\"nginx:1.25\")] ...         ) ...     ), ... ) deployment = build_deployment(spec)</p> Source code in <code>src/k8smith/core/deployment.py</code> <pre><code>def build_deployment(spec: DeploymentSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes Deployment resource.\n\n    Note: selector and template are handled manually because:\n    1. selector must be wrapped as {\"matchLabels\": ...} in output\n    2. selector labels must be merged into template.metadata.labels\n       (Kubernetes requires pod labels to match the selector)\n    3. selector auto-generates from spec.name if not provided\n    These cross-field dependencies can't be expressed in ResourceBuilder.\n\n    Args:\n        spec: Deployment specification\n\n    Returns:\n        Kubernetes Deployment resource as a dict\n\n    Example:\n        &gt;&gt;&gt; from k8smith.core.models import (\n        ...     Container, DeploymentSpec, PodSpec, PodTemplateSpec,\n        ... )\n        &gt;&gt;&gt; spec = DeploymentSpec(\n        ...     name=\"web\",\n        ...     namespace=\"production\",\n        ...     replicas=3,\n        ...     template=PodTemplateSpec(\n        ...         spec=PodSpec(\n        ...             containers=[Container(name=\"web\", image=\"nginx:1.25\")]\n        ...         )\n        ...     ),\n        ... )\n        &gt;&gt;&gt; deployment = build_deployment(spec)\n    \"\"\"\n    # Build selector and merge into template labels\n    selector = spec.selector or {\"app.kubernetes.io/name\": spec.name}\n    template_dict = spec.template.to_dict()\n    template_dict.setdefault(\"metadata\", {})\n    template_dict[\"metadata\"][\"labels\"] = {\n        **selector,\n        **template_dict[\"metadata\"].get(\"labels\", {}),\n    }\n\n    # Use ResourceBuilder for everything except selector and template\n    resource = ResourceBuilder.build(\n        spec, \"apps/v1\", \"Deployment\", skip_fields={\"selector\", \"template\"}\n    )\n    resource[\"spec\"][\"selector\"] = {\"matchLabels\": selector}\n    resource[\"spec\"][\"template\"] = template_dict\n\n    return resource\n</code></pre>"},{"location":"api/builders/#k8smith.core.statefulset.build_statefulset","title":"<code>build_statefulset(spec)</code>","text":"<p>Build a Kubernetes StatefulSet resource.</p> <p>Note: selector and template are handled manually because: 1. selector must be wrapped as {\"matchLabels\": ...} in output 2. selector labels must be merged into template.metadata.labels    (Kubernetes requires pod labels to match the selector) 3. selector auto-generates from spec.name if not provided These cross-field dependencies can't be expressed in ResourceBuilder.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>StatefulSetSpec</code> <p>StatefulSet specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes StatefulSet resource as a dict</p> Source code in <code>src/k8smith/core/statefulset.py</code> <pre><code>def build_statefulset(spec: StatefulSetSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes StatefulSet resource.\n\n    Note: selector and template are handled manually because:\n    1. selector must be wrapped as {\"matchLabels\": ...} in output\n    2. selector labels must be merged into template.metadata.labels\n       (Kubernetes requires pod labels to match the selector)\n    3. selector auto-generates from spec.name if not provided\n    These cross-field dependencies can't be expressed in ResourceBuilder.\n\n    Args:\n        spec: StatefulSet specification\n\n    Returns:\n        Kubernetes StatefulSet resource as a dict\n    \"\"\"\n    # Build selector and merge into template labels\n    selector = spec.selector or {\"app.kubernetes.io/name\": spec.name}\n    template_dict = spec.template.to_dict()\n    template_dict.setdefault(\"metadata\", {})\n    template_dict[\"metadata\"][\"labels\"] = {\n        **selector,\n        **template_dict[\"metadata\"].get(\"labels\", {}),\n    }\n\n    # Use ResourceBuilder for everything except selector and template\n    resource = ResourceBuilder.build(\n        spec, \"apps/v1\", \"StatefulSet\", skip_fields={\"selector\", \"template\"}\n    )\n    resource[\"spec\"][\"selector\"] = {\"matchLabels\": selector}\n    resource[\"spec\"][\"template\"] = template_dict\n\n    return resource\n</code></pre>"},{"location":"api/builders/#k8smith.core.daemonset.build_daemonset","title":"<code>build_daemonset(spec)</code>","text":"<p>Build a Kubernetes DaemonSet resource.</p> <p>Note: selector and template are handled manually because: 1. selector must be wrapped as {\"matchLabels\": ...} in output 2. selector labels must be merged into template.metadata.labels    (Kubernetes requires pod labels to match the selector) 3. selector auto-generates from spec.name if not provided These cross-field dependencies can't be expressed in ResourceBuilder.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>DaemonSetSpec</code> <p>DaemonSet specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes DaemonSet resource as a dict</p> Source code in <code>src/k8smith/core/daemonset.py</code> <pre><code>def build_daemonset(spec: DaemonSetSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes DaemonSet resource.\n\n    Note: selector and template are handled manually because:\n    1. selector must be wrapped as {\"matchLabels\": ...} in output\n    2. selector labels must be merged into template.metadata.labels\n       (Kubernetes requires pod labels to match the selector)\n    3. selector auto-generates from spec.name if not provided\n    These cross-field dependencies can't be expressed in ResourceBuilder.\n\n    Args:\n        spec: DaemonSet specification\n\n    Returns:\n        Kubernetes DaemonSet resource as a dict\n    \"\"\"\n    # Build selector and merge into template labels\n    selector = spec.selector or {\"app.kubernetes.io/name\": spec.name}\n    template_dict = spec.template.to_dict()\n    template_dict.setdefault(\"metadata\", {})\n    template_dict[\"metadata\"][\"labels\"] = {\n        **selector,\n        **template_dict[\"metadata\"].get(\"labels\", {}),\n    }\n\n    # Use ResourceBuilder for everything except selector and template\n    resource = ResourceBuilder.build(\n        spec, \"apps/v1\", \"DaemonSet\", skip_fields={\"selector\", \"template\"}\n    )\n    resource[\"spec\"][\"selector\"] = {\"matchLabels\": selector}\n    resource[\"spec\"][\"template\"] = template_dict\n\n    return resource\n</code></pre>"},{"location":"api/builders/#k8smith.core.cronjob.build_cronjob","title":"<code>build_cronjob(spec)</code>","text":"<p>Build a Kubernetes CronJob resource.</p> <p>Note: job_template is handled manually because Kubernetes expects the nested structure spec.jobTemplate.spec.template, which can't be expressed through ResourceBuilder's simple field routing.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>CronJobSpec</code> <p>CronJob specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes CronJob resource as a dict</p> Source code in <code>src/k8smith/core/cronjob.py</code> <pre><code>def build_cronjob(spec: CronJobSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes CronJob resource.\n\n    Note: job_template is handled manually because Kubernetes expects\n    the nested structure spec.jobTemplate.spec.template, which can't\n    be expressed through ResourceBuilder's simple field routing.\n\n    Args:\n        spec: CronJob specification\n\n    Returns:\n        Kubernetes CronJob resource as a dict\n    \"\"\"\n    resource = ResourceBuilder.build(spec, \"batch/v1\", \"CronJob\", skip_fields={\"job_template\"})\n    resource[\"spec\"][\"jobTemplate\"] = {\"spec\": {\"template\": spec.job_template.to_dict()}}\n\n    return resource\n</code></pre>"},{"location":"api/builders/#services","title":"Services","text":""},{"location":"api/builders/#k8smith.core.service.build_service","title":"<code>build_service(spec)</code>","text":"<p>Build a Kubernetes Service resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>ServiceSpec</code> <p>Service specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes Service resource as a dict</p> Source code in <code>src/k8smith/core/service.py</code> <pre><code>def build_service(spec: ServiceSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes Service resource.\n\n    Args:\n        spec: Service specification\n\n    Returns:\n        Kubernetes Service resource as a dict\n    \"\"\"\n    return ResourceBuilder.build(spec, \"v1\", \"Service\")\n</code></pre>"},{"location":"api/builders/#configuration","title":"Configuration","text":""},{"location":"api/builders/#k8smith.core.configmap.build_configmap","title":"<code>build_configmap(spec)</code>","text":"<p>Build a Kubernetes ConfigMap resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>ConfigMapSpec</code> <p>ConfigMap specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes ConfigMap resource as a dict</p> Source code in <code>src/k8smith/core/configmap.py</code> <pre><code>def build_configmap(spec: ConfigMapSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes ConfigMap resource.\n\n    Args:\n        spec: ConfigMap specification\n\n    Returns:\n        Kubernetes ConfigMap resource as a dict\n    \"\"\"\n    return ResourceBuilder.build(\n        spec,\n        \"v1\",\n        \"ConfigMap\",\n        include_spec=False,\n        top_level_fields={\"data\", \"binary_data\", \"immutable\"},\n    )\n</code></pre>"},{"location":"api/builders/#k8smith.core.secret.build_secret","title":"<code>build_secret(spec)</code>","text":"<p>Build a Kubernetes Secret resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>SecretSpec</code> <p>Secret specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes Secret resource as a dict</p> Source code in <code>src/k8smith/core/secret.py</code> <pre><code>def build_secret(spec: SecretSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes Secret resource.\n\n    Args:\n        spec: Secret specification\n\n    Returns:\n        Kubernetes Secret resource as a dict\n    \"\"\"\n    return ResourceBuilder.build(\n        spec,\n        \"v1\",\n        \"Secret\",\n        include_spec=False,\n        top_level_fields={\"type\", \"data\", \"string_data\", \"immutable\"},\n    )\n</code></pre>"},{"location":"api/builders/#scaling-availability","title":"Scaling &amp; Availability","text":""},{"location":"api/builders/#k8smith.core.hpa.build_hpa","title":"<code>build_hpa(spec)</code>","text":"<p>Build a Kubernetes HorizontalPodAutoscaler resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>HPASpec</code> <p>HPA specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes HorizontalPodAutoscaler resource as a dict</p> Source code in <code>src/k8smith/core/hpa.py</code> <pre><code>def build_hpa(spec: HPASpec) -&gt; dict:\n    \"\"\"Build a Kubernetes HorizontalPodAutoscaler resource.\n\n    Args:\n        spec: HPA specification\n\n    Returns:\n        Kubernetes HorizontalPodAutoscaler resource as a dict\n    \"\"\"\n    return ResourceBuilder.build(spec, \"autoscaling/v2\", \"HorizontalPodAutoscaler\")\n</code></pre>"},{"location":"api/builders/#k8smith.core.pdb.build_pdb","title":"<code>build_pdb(spec)</code>","text":"<p>Build a Kubernetes PodDisruptionBudget resource.</p> <p>Note: selector is handled manually because it must be wrapped as {\"matchLabels\": selector} in the output.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>PDBSpec</code> <p>PDB specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes PodDisruptionBudget resource as a dict</p> Source code in <code>src/k8smith/core/pdb.py</code> <pre><code>def build_pdb(spec: PDBSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes PodDisruptionBudget resource.\n\n    Note: selector is handled manually because it must be wrapped as\n    {\"matchLabels\": selector} in the output.\n\n    Args:\n        spec: PDB specification\n\n    Returns:\n        Kubernetes PodDisruptionBudget resource as a dict\n    \"\"\"\n    resource = ResourceBuilder.build(\n        spec, \"policy/v1\", \"PodDisruptionBudget\", skip_fields={\"selector\"}\n    )\n    if spec.selector:\n        resource[\"spec\"][\"selector\"] = {\"matchLabels\": spec.selector}\n    return resource\n</code></pre>"},{"location":"api/builders/#identity","title":"Identity","text":""},{"location":"api/builders/#k8smith.core.serviceaccount.build_serviceaccount","title":"<code>build_serviceaccount(spec)</code>","text":"<p>Build a Kubernetes ServiceAccount resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>ServiceAccountSpec</code> <p>ServiceAccount specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes ServiceAccount resource as a dict</p> Source code in <code>src/k8smith/core/serviceaccount.py</code> <pre><code>def build_serviceaccount(spec: ServiceAccountSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes ServiceAccount resource.\n\n    Args:\n        spec: ServiceAccount specification\n\n    Returns:\n        Kubernetes ServiceAccount resource as a dict\n    \"\"\"\n    return ResourceBuilder.build(\n        spec,\n        \"v1\",\n        \"ServiceAccount\",\n        include_spec=False,\n        top_level_fields={\"automount_service_account_token\", \"image_pull_secrets\"},\n    )\n</code></pre>"},{"location":"api/builders/#k8smith.core.namespace.build_namespace","title":"<code>build_namespace(spec)</code>","text":"<p>Build a Kubernetes Namespace resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>NamespaceSpec</code> <p>Namespace specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes Namespace resource as a dict</p> Source code in <code>src/k8smith/core/namespace.py</code> <pre><code>def build_namespace(spec: NamespaceSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes Namespace resource.\n\n    Args:\n        spec: Namespace specification\n\n    Returns:\n        Kubernetes Namespace resource as a dict\n    \"\"\"\n    return ResourceBuilder.build(spec, \"v1\", \"Namespace\", include_spec=False)\n</code></pre>"},{"location":"api/builders/#rbac","title":"RBAC","text":""},{"location":"api/builders/#k8smith.core.rbac.build_role","title":"<code>build_role(spec)</code>","text":"<p>Build a Kubernetes Role resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>RoleSpec</code> <p>Role specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes Role resource as a dict</p> Example <p>from k8smith.core.models import RoleSpec, PolicyRule spec = RoleSpec( ...     name=\"pod-reader\", ...     namespace=\"production\", ...     rules=[ ...         PolicyRule(api_groups=[\"\"], resources=[\"pods\"], verbs=[\"get\", \"list\", \"watch\"]), ...     ], ... ) role = build_role(spec)</p> Source code in <code>src/k8smith/core/rbac.py</code> <pre><code>def build_role(spec: RoleSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes Role resource.\n\n    Args:\n        spec: Role specification\n\n    Returns:\n        Kubernetes Role resource as a dict\n\n    Example:\n        &gt;&gt;&gt; from k8smith.core.models import RoleSpec, PolicyRule\n        &gt;&gt;&gt; spec = RoleSpec(\n        ...     name=\"pod-reader\",\n        ...     namespace=\"production\",\n        ...     rules=[\n        ...         PolicyRule(api_groups=[\"\"], resources=[\"pods\"], verbs=[\"get\", \"list\", \"watch\"]),\n        ...     ],\n        ... )\n        &gt;&gt;&gt; role = build_role(spec)\n    \"\"\"\n    return ResourceBuilder.build(\n        spec,\n        \"rbac.authorization.k8s.io/v1\",\n        \"Role\",\n        include_spec=False,\n        top_level_fields={\"rules\"},\n    )\n</code></pre>"},{"location":"api/builders/#k8smith.core.rbac.build_clusterrole","title":"<code>build_clusterrole(spec)</code>","text":"<p>Build a Kubernetes ClusterRole resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>ClusterRoleSpec</code> <p>ClusterRole specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes ClusterRole resource as a dict</p> Example <p>from k8smith.core.models import ClusterRoleSpec, PolicyRule spec = ClusterRoleSpec( ...     name=\"node-reader\", ...     rules=[ ...         PolicyRule( ...             api_groups=[\"\"], ...             resources=[\"nodes\"], ...             verbs=[\"get\", \"list\", \"watch\"], ...         ), ...     ], ... ) cluster_role = build_clusterrole(spec)</p> Source code in <code>src/k8smith/core/rbac.py</code> <pre><code>def build_clusterrole(spec: ClusterRoleSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes ClusterRole resource.\n\n    Args:\n        spec: ClusterRole specification\n\n    Returns:\n        Kubernetes ClusterRole resource as a dict\n\n    Example:\n        &gt;&gt;&gt; from k8smith.core.models import ClusterRoleSpec, PolicyRule\n        &gt;&gt;&gt; spec = ClusterRoleSpec(\n        ...     name=\"node-reader\",\n        ...     rules=[\n        ...         PolicyRule(\n        ...             api_groups=[\"\"],\n        ...             resources=[\"nodes\"],\n        ...             verbs=[\"get\", \"list\", \"watch\"],\n        ...         ),\n        ...     ],\n        ... )\n        &gt;&gt;&gt; cluster_role = build_clusterrole(spec)\n    \"\"\"\n    return ResourceBuilder.build(\n        spec,\n        \"rbac.authorization.k8s.io/v1\",\n        \"ClusterRole\",\n        include_spec=False,\n        top_level_fields={\"rules\", \"aggregation_rule\"},\n    )\n</code></pre>"},{"location":"api/builders/#k8smith.core.rbac.build_rolebinding","title":"<code>build_rolebinding(spec)</code>","text":"<p>Build a Kubernetes RoleBinding resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>RoleBindingSpec</code> <p>RoleBinding specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes RoleBinding resource as a dict</p> Example <p>from k8smith.core.models import RoleBindingSpec, RoleBindingSubject, RoleRef spec = RoleBindingSpec( ...     name=\"read-pods\", ...     namespace=\"production\", ...     subjects=[ ...         RoleBindingSubject(kind=\"ServiceAccount\", name=\"my-sa\", namespace=\"production\"), ...     ], ...     role_ref=RoleRef(kind=\"Role\", name=\"pod-reader\"), ... ) binding = build_rolebinding(spec)</p> Source code in <code>src/k8smith/core/rbac.py</code> <pre><code>def build_rolebinding(spec: RoleBindingSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes RoleBinding resource.\n\n    Args:\n        spec: RoleBinding specification\n\n    Returns:\n        Kubernetes RoleBinding resource as a dict\n\n    Example:\n        &gt;&gt;&gt; from k8smith.core.models import RoleBindingSpec, RoleBindingSubject, RoleRef\n        &gt;&gt;&gt; spec = RoleBindingSpec(\n        ...     name=\"read-pods\",\n        ...     namespace=\"production\",\n        ...     subjects=[\n        ...         RoleBindingSubject(kind=\"ServiceAccount\", name=\"my-sa\", namespace=\"production\"),\n        ...     ],\n        ...     role_ref=RoleRef(kind=\"Role\", name=\"pod-reader\"),\n        ... )\n        &gt;&gt;&gt; binding = build_rolebinding(spec)\n    \"\"\"\n    return ResourceBuilder.build(\n        spec,\n        \"rbac.authorization.k8s.io/v1\",\n        \"RoleBinding\",\n        include_spec=False,\n        top_level_fields={\"role_ref\", \"subjects\"},\n    )\n</code></pre>"},{"location":"api/builders/#k8smith.core.rbac.build_clusterrolebinding","title":"<code>build_clusterrolebinding(spec)</code>","text":"<p>Build a Kubernetes ClusterRoleBinding resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>ClusterRoleBindingSpec</code> <p>ClusterRoleBinding specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Kubernetes ClusterRoleBinding resource as a dict</p> Example <p>from k8smith.core.models import ClusterRoleBindingSpec, RoleBindingSubject, RoleRef spec = ClusterRoleBindingSpec( ...     name=\"read-nodes-global\", ...     subjects=[ ...         RoleBindingSubject( ...             kind=\"ServiceAccount\", ...             name=\"monitoring\", ...             namespace=\"kube-system\", ...         ), ...     ], ...     role_ref=RoleRef(kind=\"ClusterRole\", name=\"node-reader\"), ... ) binding = build_clusterrolebinding(spec)</p> Source code in <code>src/k8smith/core/rbac.py</code> <pre><code>def build_clusterrolebinding(spec: ClusterRoleBindingSpec) -&gt; dict:\n    \"\"\"Build a Kubernetes ClusterRoleBinding resource.\n\n    Args:\n        spec: ClusterRoleBinding specification\n\n    Returns:\n        Kubernetes ClusterRoleBinding resource as a dict\n\n    Example:\n        &gt;&gt;&gt; from k8smith.core.models import ClusterRoleBindingSpec, RoleBindingSubject, RoleRef\n        &gt;&gt;&gt; spec = ClusterRoleBindingSpec(\n        ...     name=\"read-nodes-global\",\n        ...     subjects=[\n        ...         RoleBindingSubject(\n        ...             kind=\"ServiceAccount\",\n        ...             name=\"monitoring\",\n        ...             namespace=\"kube-system\",\n        ...         ),\n        ...     ],\n        ...     role_ref=RoleRef(kind=\"ClusterRole\", name=\"node-reader\"),\n        ... )\n        &gt;&gt;&gt; binding = build_clusterrolebinding(spec)\n    \"\"\"\n    return ResourceBuilder.build(\n        spec,\n        \"rbac.authorization.k8s.io/v1\",\n        \"ClusterRoleBinding\",\n        include_spec=False,\n        top_level_fields={\"role_ref\", \"subjects\"},\n    )\n</code></pre>"},{"location":"api/gke/","title":"GKE Extensions","text":"<p>Google Kubernetes Engine specific resources.</p>"},{"location":"api/gke/#models","title":"Models","text":""},{"location":"api/gke/#gateway","title":"Gateway","text":""},{"location":"api/gke/#k8smith.gke.models.GatewaySpec","title":"<code>GatewaySpec</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>GKE Gateway specification.</p> Example <p>GatewaySpec( ...     name=\"main-gateway\", ...     namespace=\"gateway\", ...     gateway_class_name=\"gke-l7-global-external-managed\", ...     listeners=[{\"name\": \"https\", \"port\": 443, \"protocol\": \"HTTPS\"}], ... )</p> Source code in <code>src/k8smith/gke/models.py</code> <pre><code>class GatewaySpec(BaseModel):\n    \"\"\"GKE Gateway specification.\n\n    Example:\n        &gt;&gt;&gt; GatewaySpec(\n        ...     name=\"main-gateway\",\n        ...     namespace=\"gateway\",\n        ...     gateway_class_name=\"gke-l7-global-external-managed\",\n        ...     listeners=[{\"name\": \"https\", \"port\": 443, \"protocol\": \"HTTPS\"}],\n        ... )\n    \"\"\"\n\n    model_config = ConfigDict(populate_by_name=True)\n\n    name: str\n    namespace: str\n    gateway_class_name: str = Field(alias=\"gatewayClassName\")\n    labels: dict[str, str] = Field(default_factory=dict)\n    annotations: dict[str, str] = Field(default_factory=dict)\n    listeners: list[dict] = Field(default_factory=list)\n    addresses: list[dict] = Field(default_factory=list)\n</code></pre>"},{"location":"api/gke/#httproute","title":"HTTPRoute","text":""},{"location":"api/gke/#k8smith.gke.models.HTTPRouteSpec","title":"<code>HTTPRouteSpec</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>GKE HTTPRoute specification.</p> Example <p>HTTPRouteSpec( ...     name=\"app-route\", ...     namespace=\"production\", ...     parent_refs=[{\"name\": \"main-gateway\", \"namespace\": \"gateway\"}], ...     hostnames=[\"app.example.com\"], ...     rules=[{\"matches\": [{\"path\": {\"value\": \"/\"}}], \"backendRefs\": [...]}], ... )</p> Source code in <code>src/k8smith/gke/models.py</code> <pre><code>class HTTPRouteSpec(BaseModel):\n    \"\"\"GKE HTTPRoute specification.\n\n    Example:\n        &gt;&gt;&gt; HTTPRouteSpec(\n        ...     name=\"app-route\",\n        ...     namespace=\"production\",\n        ...     parent_refs=[{\"name\": \"main-gateway\", \"namespace\": \"gateway\"}],\n        ...     hostnames=[\"app.example.com\"],\n        ...     rules=[{\"matches\": [{\"path\": {\"value\": \"/\"}}], \"backendRefs\": [...]}],\n        ... )\n    \"\"\"\n\n    model_config = ConfigDict(populate_by_name=True)\n\n    name: str\n    namespace: str\n    labels: dict[str, str] = Field(default_factory=dict)\n    annotations: dict[str, str] = Field(default_factory=dict)\n    parent_refs: list[dict] = Field(alias=\"parentRefs\")\n    hostnames: list[str] = Field(default_factory=list)\n    rules: list[dict] = Field(default_factory=list)\n</code></pre>"},{"location":"api/gke/#healthcheckpolicy","title":"HealthCheckPolicy","text":""},{"location":"api/gke/#k8smith.gke.models.HealthCheckPolicySpec","title":"<code>HealthCheckPolicySpec</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>GKE HealthCheckPolicy specification.</p> Example <p>HealthCheckPolicySpec( ...     name=\"app-healthcheck\", ...     namespace=\"production\", ...     target_ref={\"group\": \"\", \"kind\": \"Service\", \"name\": \"app\"}, ...     config={\"type\": \"HTTP\", \"httpHealthCheck\": {\"requestPath\": \"/health\"}}, ... )</p> Source code in <code>src/k8smith/gke/models.py</code> <pre><code>class HealthCheckPolicySpec(BaseModel):\n    \"\"\"GKE HealthCheckPolicy specification.\n\n    Example:\n        &gt;&gt;&gt; HealthCheckPolicySpec(\n        ...     name=\"app-healthcheck\",\n        ...     namespace=\"production\",\n        ...     target_ref={\"group\": \"\", \"kind\": \"Service\", \"name\": \"app\"},\n        ...     config={\"type\": \"HTTP\", \"httpHealthCheck\": {\"requestPath\": \"/health\"}},\n        ... )\n    \"\"\"\n\n    model_config = ConfigDict(populate_by_name=True)\n\n    name: str\n    namespace: str\n    labels: dict[str, str] = Field(default_factory=dict)\n    annotations: dict[str, str] = Field(default_factory=dict)\n    target_ref: dict = Field(alias=\"targetRef\")\n    config: dict = Field(default_factory=dict)\n</code></pre>"},{"location":"api/gke/#gcpbackendpolicy","title":"GCPBackendPolicy","text":""},{"location":"api/gke/#k8smith.gke.models.GCPBackendPolicySpec","title":"<code>GCPBackendPolicySpec</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>GKE GCPBackendPolicy specification.</p> Example <p>GCPBackendPolicySpec( ...     name=\"app-backend-policy\", ...     namespace=\"production\", ...     target_ref={\"group\": \"\", \"kind\": \"Service\", \"name\": \"app\"}, ...     config={\"timeoutSec\": 30, \"connectionDraining\": {\"drainingTimeoutSec\": 60}}, ... )</p> Source code in <code>src/k8smith/gke/models.py</code> <pre><code>class GCPBackendPolicySpec(BaseModel):\n    \"\"\"GKE GCPBackendPolicy specification.\n\n    Example:\n        &gt;&gt;&gt; GCPBackendPolicySpec(\n        ...     name=\"app-backend-policy\",\n        ...     namespace=\"production\",\n        ...     target_ref={\"group\": \"\", \"kind\": \"Service\", \"name\": \"app\"},\n        ...     config={\"timeoutSec\": 30, \"connectionDraining\": {\"drainingTimeoutSec\": 60}},\n        ... )\n    \"\"\"\n\n    model_config = ConfigDict(populate_by_name=True)\n\n    name: str\n    namespace: str\n    labels: dict[str, str] = Field(default_factory=dict)\n    annotations: dict[str, str] = Field(default_factory=dict)\n    target_ref: dict = Field(alias=\"targetRef\")\n    config: dict = Field(default_factory=dict)\n</code></pre>"},{"location":"api/gke/#podmonitoring","title":"PodMonitoring","text":""},{"location":"api/gke/#k8smith.gke.models.PodMonitoringSpec","title":"<code>PodMonitoringSpec</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>GKE PodMonitoring specification (Cloud Monitoring).</p> Example <p>PodMonitoringSpec( ...     name=\"app-monitoring\", ...     namespace=\"production\", ...     selector={\"matchLabels\": {\"app\": \"web\"}}, ...     endpoints=[{\"port\": \"metrics\", \"interval\": \"30s\"}], ... )</p> Source code in <code>src/k8smith/gke/models.py</code> <pre><code>class PodMonitoringSpec(BaseModel):\n    \"\"\"GKE PodMonitoring specification (Cloud Monitoring).\n\n    Example:\n        &gt;&gt;&gt; PodMonitoringSpec(\n        ...     name=\"app-monitoring\",\n        ...     namespace=\"production\",\n        ...     selector={\"matchLabels\": {\"app\": \"web\"}},\n        ...     endpoints=[{\"port\": \"metrics\", \"interval\": \"30s\"}],\n        ... )\n    \"\"\"\n\n    model_config = ConfigDict(populate_by_name=True)\n\n    name: str\n    namespace: str\n    labels: dict[str, str] = Field(default_factory=dict)\n    annotations: dict[str, str] = Field(default_factory=dict)\n    selector: dict = Field(default_factory=dict)\n    endpoints: list[dict] = Field(default_factory=list)\n    target_labels: dict | None = Field(default=None, alias=\"targetLabels\")\n</code></pre>"},{"location":"api/gke/#clusterpodmonitoring","title":"ClusterPodMonitoring","text":""},{"location":"api/gke/#k8smith.gke.models.ClusterPodMonitoringSpec","title":"<code>ClusterPodMonitoringSpec</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>GKE ClusterPodMonitoring specification.</p> Example <p>ClusterPodMonitoringSpec( ...     name=\"cluster-monitoring\", ...     selector={\"matchLabels\": {\"monitoring\": \"enabled\"}}, ...     endpoints=[{\"port\": \"metrics\", \"interval\": \"60s\"}], ... )</p> Source code in <code>src/k8smith/gke/models.py</code> <pre><code>class ClusterPodMonitoringSpec(BaseModel):\n    \"\"\"GKE ClusterPodMonitoring specification.\n\n    Example:\n        &gt;&gt;&gt; ClusterPodMonitoringSpec(\n        ...     name=\"cluster-monitoring\",\n        ...     selector={\"matchLabels\": {\"monitoring\": \"enabled\"}},\n        ...     endpoints=[{\"port\": \"metrics\", \"interval\": \"60s\"}],\n        ... )\n    \"\"\"\n\n    model_config = ConfigDict(populate_by_name=True)\n\n    name: str\n    labels: dict[str, str] = Field(default_factory=dict)\n    annotations: dict[str, str] = Field(default_factory=dict)\n    selector: dict = Field(default_factory=dict)\n    endpoints: list[dict] = Field(default_factory=list)\n    target_labels: dict | None = Field(default=None, alias=\"targetLabels\")\n</code></pre>"},{"location":"api/gke/#builders","title":"Builders","text":""},{"location":"api/gke/#k8smith.gke.gateway.build_gateway","title":"<code>build_gateway(spec)</code>","text":"<p>Build a GKE Gateway resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>GatewaySpec</code> <p>Gateway specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>Gateway resource as a dict</p> Source code in <code>src/k8smith/gke/gateway.py</code> <pre><code>def build_gateway(spec: GatewaySpec) -&gt; dict:\n    \"\"\"Build a GKE Gateway resource.\n\n    Args:\n        spec: Gateway specification\n\n    Returns:\n        Gateway resource as a dict\n    \"\"\"\n    gateway: dict = {\n        \"apiVersion\": \"gateway.networking.k8s.io/v1\",\n        \"kind\": \"Gateway\",\n        \"metadata\": {\n            \"name\": spec.name,\n            \"namespace\": spec.namespace,\n        },\n        \"spec\": {\n            \"gatewayClassName\": spec.gateway_class_name,\n            \"listeners\": spec.listeners,\n        },\n    }\n\n    # Add optional metadata fields\n    if spec.labels:\n        gateway[\"metadata\"][\"labels\"] = spec.labels\n    if spec.annotations:\n        gateway[\"metadata\"][\"annotations\"] = spec.annotations\n\n    # Add optional spec fields\n    if spec.addresses:\n        gateway[\"spec\"][\"addresses\"] = spec.addresses\n\n    return gateway\n</code></pre>"},{"location":"api/gke/#k8smith.gke.httproute.build_httproute","title":"<code>build_httproute(spec)</code>","text":"<p>Build a GKE HTTPRoute resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>HTTPRouteSpec</code> <p>HTTPRoute specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>HTTPRoute resource as a dict</p> Source code in <code>src/k8smith/gke/httproute.py</code> <pre><code>def build_httproute(spec: HTTPRouteSpec) -&gt; dict:\n    \"\"\"Build a GKE HTTPRoute resource.\n\n    Args:\n        spec: HTTPRoute specification\n\n    Returns:\n        HTTPRoute resource as a dict\n    \"\"\"\n    httproute: dict = {\n        \"apiVersion\": \"gateway.networking.k8s.io/v1\",\n        \"kind\": \"HTTPRoute\",\n        \"metadata\": {\n            \"name\": spec.name,\n            \"namespace\": spec.namespace,\n        },\n        \"spec\": {\n            \"parentRefs\": spec.parent_refs,\n        },\n    }\n\n    # Add optional metadata fields\n    if spec.labels:\n        httproute[\"metadata\"][\"labels\"] = spec.labels\n    if spec.annotations:\n        httproute[\"metadata\"][\"annotations\"] = spec.annotations\n\n    # Add optional spec fields\n    if spec.hostnames:\n        httproute[\"spec\"][\"hostnames\"] = spec.hostnames\n    if spec.rules:\n        httproute[\"spec\"][\"rules\"] = spec.rules\n\n    return httproute\n</code></pre>"},{"location":"api/gke/#k8smith.gke.healthcheck.build_healthcheckpolicy","title":"<code>build_healthcheckpolicy(spec)</code>","text":"<p>Build a GKE HealthCheckPolicy resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>HealthCheckPolicySpec</code> <p>HealthCheckPolicy specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>HealthCheckPolicy resource as a dict</p> Source code in <code>src/k8smith/gke/healthcheck.py</code> <pre><code>def build_healthcheckpolicy(spec: HealthCheckPolicySpec) -&gt; dict:\n    \"\"\"Build a GKE HealthCheckPolicy resource.\n\n    Args:\n        spec: HealthCheckPolicy specification\n\n    Returns:\n        HealthCheckPolicy resource as a dict\n    \"\"\"\n    healthcheck: dict = {\n        \"apiVersion\": \"networking.gke.io/v1\",\n        \"kind\": \"HealthCheckPolicy\",\n        \"metadata\": {\n            \"name\": spec.name,\n            \"namespace\": spec.namespace,\n        },\n        \"spec\": {\n            \"targetRef\": spec.target_ref,\n            \"default\": spec.config,\n        },\n    }\n\n    # Add optional metadata fields\n    if spec.labels:\n        healthcheck[\"metadata\"][\"labels\"] = spec.labels\n    if spec.annotations:\n        healthcheck[\"metadata\"][\"annotations\"] = spec.annotations\n\n    return healthcheck\n</code></pre>"},{"location":"api/gke/#k8smith.gke.backendpolicy.build_gcp_backend_policy","title":"<code>build_gcp_backend_policy(spec)</code>","text":"<p>Build a GKE GCPBackendPolicy resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>GCPBackendPolicySpec</code> <p>GCPBackendPolicy specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>GCPBackendPolicy resource as a dict</p> Source code in <code>src/k8smith/gke/backendpolicy.py</code> <pre><code>def build_gcp_backend_policy(spec: GCPBackendPolicySpec) -&gt; dict:\n    \"\"\"Build a GKE GCPBackendPolicy resource.\n\n    Args:\n        spec: GCPBackendPolicy specification\n\n    Returns:\n        GCPBackendPolicy resource as a dict\n    \"\"\"\n    policy: dict = {\n        \"apiVersion\": \"networking.gke.io/v1\",\n        \"kind\": \"GCPBackendPolicy\",\n        \"metadata\": {\n            \"name\": spec.name,\n            \"namespace\": spec.namespace,\n        },\n        \"spec\": {\n            \"targetRef\": spec.target_ref,\n            \"default\": spec.config,\n        },\n    }\n\n    # Add optional metadata fields\n    if spec.labels:\n        policy[\"metadata\"][\"labels\"] = spec.labels\n    if spec.annotations:\n        policy[\"metadata\"][\"annotations\"] = spec.annotations\n\n    return policy\n</code></pre>"},{"location":"api/gke/#k8smith.gke.monitoring.build_pod_monitoring","title":"<code>build_pod_monitoring(spec)</code>","text":"<p>Build a GKE PodMonitoring resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>PodMonitoringSpec</code> <p>PodMonitoring specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>PodMonitoring resource as a dict</p> Source code in <code>src/k8smith/gke/monitoring.py</code> <pre><code>def build_pod_monitoring(spec: PodMonitoringSpec) -&gt; dict:\n    \"\"\"Build a GKE PodMonitoring resource.\n\n    Args:\n        spec: PodMonitoring specification\n\n    Returns:\n        PodMonitoring resource as a dict\n    \"\"\"\n    monitoring: dict = {\n        \"apiVersion\": \"monitoring.googleapis.com/v1\",\n        \"kind\": \"PodMonitoring\",\n        \"metadata\": {\n            \"name\": spec.name,\n            \"namespace\": spec.namespace,\n        },\n        \"spec\": {\n            \"selector\": spec.selector,\n            \"endpoints\": spec.endpoints,\n        },\n    }\n\n    # Add optional metadata fields\n    if spec.labels:\n        monitoring[\"metadata\"][\"labels\"] = spec.labels\n    if spec.annotations:\n        monitoring[\"metadata\"][\"annotations\"] = spec.annotations\n\n    # Add optional spec fields\n    if spec.target_labels:\n        monitoring[\"spec\"][\"targetLabels\"] = spec.target_labels\n\n    return monitoring\n</code></pre>"},{"location":"api/gke/#k8smith.gke.monitoring.build_cluster_pod_monitoring","title":"<code>build_cluster_pod_monitoring(spec)</code>","text":"<p>Build a GKE ClusterPodMonitoring resource.</p> <p>Parameters:</p> Name Type Description Default <code>spec</code> <code>ClusterPodMonitoringSpec</code> <p>ClusterPodMonitoring specification</p> required <p>Returns:</p> Type Description <code>dict</code> <p>ClusterPodMonitoring resource as a dict</p> Source code in <code>src/k8smith/gke/monitoring.py</code> <pre><code>def build_cluster_pod_monitoring(spec: ClusterPodMonitoringSpec) -&gt; dict:\n    \"\"\"Build a GKE ClusterPodMonitoring resource.\n\n    Args:\n        spec: ClusterPodMonitoring specification\n\n    Returns:\n        ClusterPodMonitoring resource as a dict\n    \"\"\"\n    monitoring: dict = {\n        \"apiVersion\": \"monitoring.googleapis.com/v1\",\n        \"kind\": \"ClusterPodMonitoring\",\n        \"metadata\": {\n            \"name\": spec.name,\n        },\n        \"spec\": {\n            \"selector\": spec.selector,\n            \"endpoints\": spec.endpoints,\n        },\n    }\n\n    # Add optional metadata fields\n    if spec.labels:\n        monitoring[\"metadata\"][\"labels\"] = spec.labels\n    if spec.annotations:\n        monitoring[\"metadata\"][\"annotations\"] = spec.annotations\n\n    # Add optional spec fields\n    if spec.target_labels:\n        monitoring[\"spec\"][\"targetLabels\"] = spec.target_labels\n\n    return monitoring\n</code></pre>"},{"location":"api/models/","title":"Core Models","text":"<p>Pydantic models for Kubernetes resource specifications.</p>"},{"location":"api/models/#base-models","title":"Base Models","text":""},{"location":"api/models/#k8smith.core.models.KubeModel","title":"<code>KubeModel</code>","text":"<p>Base model for all Kubernetes resources.</p> <p>Provides common configuration and serialization behavior.</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class KubeModel(BaseModel):\n    \"\"\"Base model for all Kubernetes resources.\n\n    Provides common configuration and serialization behavior.\n    \"\"\"\n\n    model_config = ConfigDict(populate_by_name=True)\n\n    def to_dict(self) -&gt; dict[str, Any]:\n        \"\"\"Serialize to a dict suitable for Kubernetes YAML.\n\n        Excludes None values and empty collections.\n        \"\"\"\n        return _clean_dict(self.model_dump(by_alias=True, exclude_none=True))\n</code></pre>"},{"location":"api/models/#resource-specifications","title":"Resource Specifications","text":""},{"location":"api/models/#deployment","title":"Deployment","text":""},{"location":"api/models/#k8smith.core.models.DeploymentSpec","title":"<code>DeploymentSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Deployment specification.</p> Example <p>DeploymentSpec( ...     name=\"web\", ...     namespace=\"production\", ...     replicas=3, ...     template=PodTemplateSpec(...), ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class DeploymentSpec(KubeModel):\n    \"\"\"Deployment specification.\n\n    Example:\n        &gt;&gt;&gt; DeploymentSpec(\n        ...     name=\"web\",\n        ...     namespace=\"production\",\n        ...     replicas=3,\n        ...     template=PodTemplateSpec(...),\n        ... )\n    \"\"\"\n\n    name: str\n    namespace: str\n    replicas: int | None = None\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    selector: dict[str, str] | None = None\n    template: PodTemplateSpec\n    strategy: dict | None = None\n    min_ready_seconds: int | None = Field(default=None, alias=\"minReadySeconds\")\n    revision_history_limit: int | None = Field(default=None, alias=\"revisionHistoryLimit\")\n    progress_deadline_seconds: int | None = Field(default=None, alias=\"progressDeadlineSeconds\")\n    paused: bool | None = None\n</code></pre>"},{"location":"api/models/#statefulset","title":"StatefulSet","text":""},{"location":"api/models/#k8smith.core.models.StatefulSetSpec","title":"<code>StatefulSetSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>StatefulSet specification.</p> Example <p>StatefulSetSpec( ...     name=\"db\", ...     namespace=\"production\", ...     service_name=\"db-headless\", ...     template=PodTemplateSpec(...), ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class StatefulSetSpec(KubeModel):\n    \"\"\"StatefulSet specification.\n\n    Example:\n        &gt;&gt;&gt; StatefulSetSpec(\n        ...     name=\"db\",\n        ...     namespace=\"production\",\n        ...     service_name=\"db-headless\",\n        ...     template=PodTemplateSpec(...),\n        ... )\n    \"\"\"\n\n    name: str\n    namespace: str\n    replicas: int | None = None\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    selector: dict[str, str] | None = None\n    template: PodTemplateSpec\n    service_name: str = Field(alias=\"serviceName\")\n    volume_claim_templates: list[dict] | None = Field(default=None, alias=\"volumeClaimTemplates\")\n    pod_management_policy: Literal[\"OrderedReady\", \"Parallel\"] | None = Field(\n        default=None, alias=\"podManagementPolicy\"\n    )\n    update_strategy: dict | None = Field(default=None, alias=\"updateStrategy\")\n    revision_history_limit: int | None = Field(default=None, alias=\"revisionHistoryLimit\")\n    min_ready_seconds: int | None = Field(default=None, alias=\"minReadySeconds\")\n    persistent_volume_claim_retention_policy: dict | None = Field(\n        default=None, alias=\"persistentVolumeClaimRetentionPolicy\"\n    )\n</code></pre>"},{"location":"api/models/#daemonset","title":"DaemonSet","text":""},{"location":"api/models/#k8smith.core.models.DaemonSetSpec","title":"<code>DaemonSetSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>DaemonSet specification.</p> Example <p>DaemonSetSpec( ...     name=\"node-agent\", ...     namespace=\"kube-system\", ...     template=PodTemplateSpec(...), ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class DaemonSetSpec(KubeModel):\n    \"\"\"DaemonSet specification.\n\n    Example:\n        &gt;&gt;&gt; DaemonSetSpec(\n        ...     name=\"node-agent\",\n        ...     namespace=\"kube-system\",\n        ...     template=PodTemplateSpec(...),\n        ... )\n    \"\"\"\n\n    name: str\n    namespace: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    selector: dict[str, str] | None = None\n    template: PodTemplateSpec\n    update_strategy: dict | None = Field(default=None, alias=\"updateStrategy\")\n    min_ready_seconds: int | None = Field(default=None, alias=\"minReadySeconds\")\n    revision_history_limit: int | None = Field(default=None, alias=\"revisionHistoryLimit\")\n</code></pre>"},{"location":"api/models/#service","title":"Service","text":""},{"location":"api/models/#k8smith.core.models.ServiceSpec","title":"<code>ServiceSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Service specification.</p> Example <p>ServiceSpec( ...     name=\"web\", ...     namespace=\"production\", ...     ports=[ServicePort(port=80, target_port=8080)], ...     selector={\"app\": \"web\"}, ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class ServiceSpec(KubeModel):\n    \"\"\"Service specification.\n\n    Example:\n        &gt;&gt;&gt; ServiceSpec(\n        ...     name=\"web\",\n        ...     namespace=\"production\",\n        ...     ports=[ServicePort(port=80, target_port=8080)],\n        ...     selector={\"app\": \"web\"},\n        ... )\n    \"\"\"\n\n    name: str\n    namespace: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    selector: dict[str, str] | None = None\n    ports: list[ServicePort] | None = None\n    type: Literal[\"ClusterIP\", \"NodePort\", \"LoadBalancer\", \"ExternalName\"] | None = None\n    cluster_ip: str | None = Field(default=None, alias=\"clusterIP\")\n    external_name: str | None = Field(default=None, alias=\"externalName\")\n    external_traffic_policy: Literal[\"Cluster\", \"Local\"] | None = Field(\n        default=None, alias=\"externalTrafficPolicy\"\n    )\n    internal_traffic_policy: Literal[\"Cluster\", \"Local\"] | None = Field(\n        default=None, alias=\"internalTrafficPolicy\"\n    )\n    session_affinity: Literal[\"ClientIP\", \"None\"] | None = Field(\n        default=None, alias=\"sessionAffinity\"\n    )\n    load_balancer_ip: str | None = Field(default=None, alias=\"loadBalancerIP\")\n    load_balancer_source_ranges: list[str] | None = Field(\n        default=None, alias=\"loadBalancerSourceRanges\"\n    )\n</code></pre>"},{"location":"api/models/#cronjob","title":"CronJob","text":""},{"location":"api/models/#k8smith.core.models.CronJobSpec","title":"<code>CronJobSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>CronJob specification.</p> Example <p>CronJobSpec( ...     name=\"backup\", ...     namespace=\"production\", ...     schedule=\"0 2 * * *\", ...     job_template=PodTemplateSpec(...), ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class CronJobSpec(KubeModel):\n    \"\"\"CronJob specification.\n\n    Example:\n        &gt;&gt;&gt; CronJobSpec(\n        ...     name=\"backup\",\n        ...     namespace=\"production\",\n        ...     schedule=\"0 2 * * *\",\n        ...     job_template=PodTemplateSpec(...),\n        ... )\n    \"\"\"\n\n    name: str\n    namespace: str\n    schedule: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    job_template: PodTemplateSpec = Field(alias=\"jobTemplate\")\n    concurrency_policy: Literal[\"Allow\", \"Forbid\", \"Replace\"] | None = Field(\n        default=None, alias=\"concurrencyPolicy\"\n    )\n    successful_jobs_history_limit: int | None = Field(\n        default=None, alias=\"successfulJobsHistoryLimit\"\n    )\n    failed_jobs_history_limit: int | None = Field(default=None, alias=\"failedJobsHistoryLimit\")\n    starting_deadline_seconds: int | None = Field(default=None, alias=\"startingDeadlineSeconds\")\n    suspend: bool | None = None\n    time_zone: str | None = Field(default=None, alias=\"timeZone\")\n</code></pre>"},{"location":"api/models/#configmap","title":"ConfigMap","text":""},{"location":"api/models/#k8smith.core.models.ConfigMapSpec","title":"<code>ConfigMapSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>ConfigMap specification.</p> Example <p>ConfigMapSpec( ...     name=\"app-config\", ...     namespace=\"production\", ...     data={\"config.yaml\": \"key: value\"}, ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class ConfigMapSpec(KubeModel):\n    \"\"\"ConfigMap specification.\n\n    Example:\n        &gt;&gt;&gt; ConfigMapSpec(\n        ...     name=\"app-config\",\n        ...     namespace=\"production\",\n        ...     data={\"config.yaml\": \"key: value\"},\n        ... )\n    \"\"\"\n\n    name: str\n    namespace: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    data: dict[str, str] | None = None\n    binary_data: dict[str, str] | None = Field(default=None, alias=\"binaryData\")\n    immutable: bool | None = None\n</code></pre>"},{"location":"api/models/#secret","title":"Secret","text":""},{"location":"api/models/#k8smith.core.models.SecretSpec","title":"<code>SecretSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Secret specification.</p> Example <p>SecretSpec( ...     name=\"db-credentials\", ...     namespace=\"production\", ...     string_data={\"username\": \"admin\", \"password\": \"secret\"}, ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class SecretSpec(KubeModel):\n    \"\"\"Secret specification.\n\n    Example:\n        &gt;&gt;&gt; SecretSpec(\n        ...     name=\"db-credentials\",\n        ...     namespace=\"production\",\n        ...     string_data={\"username\": \"admin\", \"password\": \"secret\"},\n        ... )\n    \"\"\"\n\n    name: str\n    namespace: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    data: dict[str, str] | None = None\n    string_data: dict[str, str] | None = Field(default=None, alias=\"stringData\")\n    type: str | None = None\n    immutable: bool | None = None\n</code></pre>"},{"location":"api/models/#hpa","title":"HPA","text":""},{"location":"api/models/#k8smith.core.models.HPASpec","title":"<code>HPASpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>HorizontalPodAutoscaler specification.</p> Example <p>HPASpec( ...     name=\"web-hpa\", ...     namespace=\"production\", ...     scale_target_ref={\"apiVersion\": \"apps/v1\", \"kind\": \"Deployment\", \"name\": \"web\"}, ...     min_replicas=2, ...     max_replicas=10, ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class HPASpec(KubeModel):\n    \"\"\"HorizontalPodAutoscaler specification.\n\n    Example:\n        &gt;&gt;&gt; HPASpec(\n        ...     name=\"web-hpa\",\n        ...     namespace=\"production\",\n        ...     scale_target_ref={\"apiVersion\": \"apps/v1\", \"kind\": \"Deployment\", \"name\": \"web\"},\n        ...     min_replicas=2,\n        ...     max_replicas=10,\n        ... )\n    \"\"\"\n\n    name: str\n    namespace: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    scale_target_ref: dict = Field(alias=\"scaleTargetRef\")\n    min_replicas: int | None = Field(default=None, alias=\"minReplicas\")\n    max_replicas: int = Field(alias=\"maxReplicas\")\n    metrics: list[dict] | None = None\n    behavior: dict | None = None\n</code></pre>"},{"location":"api/models/#pdb","title":"PDB","text":""},{"location":"api/models/#k8smith.core.models.PDBSpec","title":"<code>PDBSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>PodDisruptionBudget specification.</p> Example <p>PDBSpec( ...     name=\"web-pdb\", ...     namespace=\"production\", ...     selector={\"app\": \"web\"}, ...     min_available=1, ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class PDBSpec(KubeModel):\n    \"\"\"PodDisruptionBudget specification.\n\n    Example:\n        &gt;&gt;&gt; PDBSpec(\n        ...     name=\"web-pdb\",\n        ...     namespace=\"production\",\n        ...     selector={\"app\": \"web\"},\n        ...     min_available=1,\n        ... )\n    \"\"\"\n\n    name: str\n    namespace: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    selector: dict[str, str] | None = None\n    min_available: int | str | None = Field(default=None, alias=\"minAvailable\")\n    max_unavailable: int | str | None = Field(default=None, alias=\"maxUnavailable\")\n</code></pre>"},{"location":"api/models/#serviceaccount","title":"ServiceAccount","text":""},{"location":"api/models/#k8smith.core.models.ServiceAccountSpec","title":"<code>ServiceAccountSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>ServiceAccount specification.</p> Example <p>ServiceAccountSpec(name=\"app-sa\", namespace=\"production\")</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class ServiceAccountSpec(KubeModel):\n    \"\"\"ServiceAccount specification.\n\n    Example:\n        &gt;&gt;&gt; ServiceAccountSpec(name=\"app-sa\", namespace=\"production\")\n    \"\"\"\n\n    name: str\n    namespace: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    automount_service_account_token: bool | None = Field(\n        default=None, alias=\"automountServiceAccountToken\"\n    )\n    image_pull_secrets: list[dict] | None = Field(default=None, alias=\"imagePullSecrets\")\n</code></pre>"},{"location":"api/models/#namespace","title":"Namespace","text":""},{"location":"api/models/#k8smith.core.models.NamespaceSpec","title":"<code>NamespaceSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Namespace specification.</p> Example <p>NamespaceSpec(name=\"production\", labels={\"env\": \"prod\"})</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class NamespaceSpec(KubeModel):\n    \"\"\"Namespace specification.\n\n    Example:\n        &gt;&gt;&gt; NamespaceSpec(name=\"production\", labels={\"env\": \"prod\"})\n    \"\"\"\n\n    name: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n</code></pre>"},{"location":"api/models/#rbac-models","title":"RBAC Models","text":""},{"location":"api/models/#role","title":"Role","text":""},{"location":"api/models/#k8smith.core.models.RoleSpec","title":"<code>RoleSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Role specification (namespaced RBAC).</p> Example <p>RoleSpec( ...     name=\"pod-reader\", ...     namespace=\"production\", ...     rules=[ ...         PolicyRule(api_groups=[\"\"], resources=[\"pods\"], verbs=[\"get\", \"list\", \"watch\"]), ...     ], ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class RoleSpec(KubeModel):\n    \"\"\"Role specification (namespaced RBAC).\n\n    Example:\n        &gt;&gt;&gt; RoleSpec(\n        ...     name=\"pod-reader\",\n        ...     namespace=\"production\",\n        ...     rules=[\n        ...         PolicyRule(api_groups=[\"\"], resources=[\"pods\"], verbs=[\"get\", \"list\", \"watch\"]),\n        ...     ],\n        ... )\n    \"\"\"\n\n    name: str\n    namespace: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    rules: list[PolicyRule] | None = None\n</code></pre>"},{"location":"api/models/#clusterrole","title":"ClusterRole","text":""},{"location":"api/models/#k8smith.core.models.ClusterRoleSpec","title":"<code>ClusterRoleSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>ClusterRole specification (cluster-wide RBAC).</p> Example <p>ClusterRoleSpec( ...     name=\"node-reader\", ...     rules=[ ...         PolicyRule( ...             api_groups=[\"\"], ...             resources=[\"nodes\"], ...             verbs=[\"get\", \"list\", \"watch\"], ...         ), ...     ], ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class ClusterRoleSpec(KubeModel):\n    \"\"\"ClusterRole specification (cluster-wide RBAC).\n\n    Example:\n        &gt;&gt;&gt; ClusterRoleSpec(\n        ...     name=\"node-reader\",\n        ...     rules=[\n        ...         PolicyRule(\n        ...             api_groups=[\"\"],\n        ...             resources=[\"nodes\"],\n        ...             verbs=[\"get\", \"list\", \"watch\"],\n        ...         ),\n        ...     ],\n        ... )\n    \"\"\"\n\n    name: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    rules: list[PolicyRule] | None = None\n    aggregation_rule: dict | None = Field(default=None, alias=\"aggregationRule\")\n</code></pre>"},{"location":"api/models/#rolebinding","title":"RoleBinding","text":""},{"location":"api/models/#k8smith.core.models.RoleBindingSpec","title":"<code>RoleBindingSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>RoleBinding specification (namespaced binding).</p> Example <p>RoleBindingSpec( ...     name=\"read-pods\", ...     namespace=\"production\", ...     subjects=[ ...         RoleBindingSubject(kind=\"ServiceAccount\", name=\"my-sa\", namespace=\"production\"), ...     ], ...     role_ref=RoleRef(kind=\"Role\", name=\"pod-reader\"), ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class RoleBindingSpec(KubeModel):\n    \"\"\"RoleBinding specification (namespaced binding).\n\n    Example:\n        &gt;&gt;&gt; RoleBindingSpec(\n        ...     name=\"read-pods\",\n        ...     namespace=\"production\",\n        ...     subjects=[\n        ...         RoleBindingSubject(kind=\"ServiceAccount\", name=\"my-sa\", namespace=\"production\"),\n        ...     ],\n        ...     role_ref=RoleRef(kind=\"Role\", name=\"pod-reader\"),\n        ... )\n    \"\"\"\n\n    name: str\n    namespace: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    subjects: list[RoleBindingSubject] | None = None\n    role_ref: RoleRef = Field(alias=\"roleRef\")\n</code></pre>"},{"location":"api/models/#clusterrolebinding","title":"ClusterRoleBinding","text":""},{"location":"api/models/#k8smith.core.models.ClusterRoleBindingSpec","title":"<code>ClusterRoleBindingSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>ClusterRoleBinding specification (cluster-wide binding).</p> Example <p>ClusterRoleBindingSpec( ...     name=\"read-nodes\", ...     subjects=[ ...         RoleBindingSubject( ...             kind=\"ServiceAccount\", ...             name=\"monitoring\", ...             namespace=\"kube-system\", ...         ), ...     ], ...     role_ref=RoleRef(kind=\"ClusterRole\", name=\"node-reader\"), ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class ClusterRoleBindingSpec(KubeModel):\n    \"\"\"ClusterRoleBinding specification (cluster-wide binding).\n\n    Example:\n        &gt;&gt;&gt; ClusterRoleBindingSpec(\n        ...     name=\"read-nodes\",\n        ...     subjects=[\n        ...         RoleBindingSubject(\n        ...             kind=\"ServiceAccount\",\n        ...             name=\"monitoring\",\n        ...             namespace=\"kube-system\",\n        ...         ),\n        ...     ],\n        ...     role_ref=RoleRef(kind=\"ClusterRole\", name=\"node-reader\"),\n        ... )\n    \"\"\"\n\n    name: str\n    labels: dict[str, str] | None = None\n    annotations: dict[str, str] | None = None\n    subjects: list[RoleBindingSubject] | None = None\n    role_ref: RoleRef = Field(alias=\"roleRef\")\n</code></pre>"},{"location":"api/models/#policyrule","title":"PolicyRule","text":""},{"location":"api/models/#k8smith.core.models.PolicyRule","title":"<code>PolicyRule</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>RBAC policy rule for Role and ClusterRole.</p> Example <p>PolicyRule( ...     api_groups=[\"\"], ...     resources=[\"pods\", \"pods/log\"], ...     verbs=[\"get\", \"list\", \"watch\"], ... ) PolicyRule( ...     api_groups=[\"apps\"], ...     resources=[\"deployments\"], ...     verbs=[\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\", \"delete\"], ...     resource_names=[\"my-deployment\"], ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class PolicyRule(KubeModel):\n    \"\"\"RBAC policy rule for Role and ClusterRole.\n\n    Example:\n        &gt;&gt;&gt; PolicyRule(\n        ...     api_groups=[\"\"],\n        ...     resources=[\"pods\", \"pods/log\"],\n        ...     verbs=[\"get\", \"list\", \"watch\"],\n        ... )\n        &gt;&gt;&gt; PolicyRule(\n        ...     api_groups=[\"apps\"],\n        ...     resources=[\"deployments\"],\n        ...     verbs=[\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\", \"delete\"],\n        ...     resource_names=[\"my-deployment\"],\n        ... )\n    \"\"\"\n\n    api_groups: list[str] | None = Field(default=None, alias=\"apiGroups\")\n    resources: list[str] | None = None\n    resource_names: list[str] | None = Field(default=None, alias=\"resourceNames\")\n    verbs: list[str]\n    non_resource_urls: list[str] | None = Field(default=None, alias=\"nonResourceURLs\")\n</code></pre>"},{"location":"api/models/#roleref","title":"RoleRef","text":""},{"location":"api/models/#k8smith.core.models.RoleRef","title":"<code>RoleRef</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Reference to a Role or ClusterRole.</p> Example <p>RoleRef(kind=\"Role\", name=\"pod-reader\", api_group=\"rbac.authorization.k8s.io\") RoleRef(kind=\"ClusterRole\", name=\"admin\", api_group=\"rbac.authorization.k8s.io\")</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class RoleRef(KubeModel):\n    \"\"\"Reference to a Role or ClusterRole.\n\n    Example:\n        &gt;&gt;&gt; RoleRef(kind=\"Role\", name=\"pod-reader\", api_group=\"rbac.authorization.k8s.io\")\n        &gt;&gt;&gt; RoleRef(kind=\"ClusterRole\", name=\"admin\", api_group=\"rbac.authorization.k8s.io\")\n    \"\"\"\n\n    kind: Literal[\"Role\", \"ClusterRole\"]\n    name: str\n    api_group: str = Field(default=\"rbac.authorization.k8s.io\", alias=\"apiGroup\")\n</code></pre>"},{"location":"api/models/#rolebindingsubject","title":"RoleBindingSubject","text":""},{"location":"api/models/#k8smith.core.models.RoleBindingSubject","title":"<code>RoleBindingSubject</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Subject for RoleBinding and ClusterRoleBinding.</p> Example <p>RoleBindingSubject(kind=\"ServiceAccount\", name=\"my-sa\", namespace=\"production\") RoleBindingSubject(kind=\"User\", name=\"jane@example.com\") RoleBindingSubject(kind=\"Group\", name=\"developers\")</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class RoleBindingSubject(KubeModel):\n    \"\"\"Subject for RoleBinding and ClusterRoleBinding.\n\n    Example:\n        &gt;&gt;&gt; RoleBindingSubject(kind=\"ServiceAccount\", name=\"my-sa\", namespace=\"production\")\n        &gt;&gt;&gt; RoleBindingSubject(kind=\"User\", name=\"jane@example.com\")\n        &gt;&gt;&gt; RoleBindingSubject(kind=\"Group\", name=\"developers\")\n    \"\"\"\n\n    kind: Literal[\"User\", \"Group\", \"ServiceAccount\"]\n    name: str\n    namespace: str | None = None\n    api_group: str | None = Field(default=None, alias=\"apiGroup\")\n</code></pre>"},{"location":"api/models/#pod-components","title":"Pod Components","text":""},{"location":"api/models/#container","title":"Container","text":""},{"location":"api/models/#k8smith.core.models.Container","title":"<code>Container</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Container specification.</p> Example <p>Container( ...     name=\"web\", ...     image=\"nginx:1.25\", ...     ports=[ContainerPort(container_port=80)], ...     resources=ResourceRequirements( ...         requests=ResourceQuantity(cpu=\"100m\", memory=\"128Mi\"), ...     ), ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class Container(KubeModel):\n    \"\"\"Container specification.\n\n    Example:\n        &gt;&gt;&gt; Container(\n        ...     name=\"web\",\n        ...     image=\"nginx:1.25\",\n        ...     ports=[ContainerPort(container_port=80)],\n        ...     resources=ResourceRequirements(\n        ...         requests=ResourceQuantity(cpu=\"100m\", memory=\"128Mi\"),\n        ...     ),\n        ... )\n    \"\"\"\n\n    name: str\n    image: str\n    image_pull_policy: Literal[\"Always\", \"IfNotPresent\", \"Never\"] | None = Field(\n        default=None, alias=\"imagePullPolicy\"\n    )\n    command: list[str] | None = None\n    args: list[str] | None = None\n    working_dir: str | None = Field(default=None, alias=\"workingDir\")\n    env: list[EnvVar] | None = None\n    env_from: list[EnvFromSource] | None = Field(default=None, alias=\"envFrom\")\n    ports: list[ContainerPort] | None = None\n    resources: ResourceRequirements | None = None\n    volume_mounts: list[VolumeMount] | None = Field(default=None, alias=\"volumeMounts\")\n    liveness_probe: Probe | None = Field(default=None, alias=\"livenessProbe\")\n    readiness_probe: Probe | None = Field(default=None, alias=\"readinessProbe\")\n    startup_probe: Probe | None = Field(default=None, alias=\"startupProbe\")\n    security_context: SecurityContext | None = Field(default=None, alias=\"securityContext\")\n    stdin: bool | None = None\n    tty: bool | None = None\n</code></pre>"},{"location":"api/models/#podspec","title":"PodSpec","text":""},{"location":"api/models/#k8smith.core.models.PodSpec","title":"<code>PodSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Pod specification.</p> Example <p>PodSpec( ...     containers=[Container(name=\"app\", image=\"myapp:v1\")], ...     service_account_name=\"my-sa\", ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class PodSpec(KubeModel):\n    \"\"\"Pod specification.\n\n    Example:\n        &gt;&gt;&gt; PodSpec(\n        ...     containers=[Container(name=\"app\", image=\"myapp:v1\")],\n        ...     service_account_name=\"my-sa\",\n        ... )\n    \"\"\"\n\n    containers: list[Container]\n    init_containers: list[Container] | None = Field(default=None, alias=\"initContainers\")\n    volumes: list[Volume] | None = None\n    service_account_name: str | None = Field(default=None, alias=\"serviceAccountName\")\n    automount_service_account_token: bool | None = Field(\n        default=None, alias=\"automountServiceAccountToken\"\n    )\n    node_selector: dict[str, str] | None = Field(default=None, alias=\"nodeSelector\")\n    node_name: str | None = Field(default=None, alias=\"nodeName\")\n    tolerations: list[Toleration] | None = None\n    affinity: dict | None = None\n    host_network: bool | None = Field(default=None, alias=\"hostNetwork\")\n    host_pid: bool | None = Field(default=None, alias=\"hostPID\")\n    dns_policy: str | None = Field(default=None, alias=\"dnsPolicy\")\n    dns_config: dict | None = Field(default=None, alias=\"dnsConfig\")\n    security_context: PodSecurityContext | None = Field(default=None, alias=\"securityContext\")\n    image_pull_secrets: list[dict] | None = Field(default=None, alias=\"imagePullSecrets\")\n    restart_policy: Literal[\"Always\", \"OnFailure\", \"Never\"] | None = Field(\n        default=None, alias=\"restartPolicy\"\n    )\n    termination_grace_period_seconds: int | None = Field(\n        default=None, alias=\"terminationGracePeriodSeconds\"\n    )\n    priority_class_name: str | None = Field(default=None, alias=\"priorityClassName\")\n</code></pre>"},{"location":"api/models/#podtemplatespec","title":"PodTemplateSpec","text":""},{"location":"api/models/#k8smith.core.models.PodTemplateSpec","title":"<code>PodTemplateSpec</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Pod template for Deployment, StatefulSet, etc.</p> Example <p>PodTemplateSpec( ...     metadata={\"labels\": {\"app\": \"web\"}}, ...     spec=PodSpec(containers=[Container(name=\"web\", image=\"nginx\")]), ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class PodTemplateSpec(KubeModel):\n    \"\"\"Pod template for Deployment, StatefulSet, etc.\n\n    Example:\n        &gt;&gt;&gt; PodTemplateSpec(\n        ...     metadata={\"labels\": {\"app\": \"web\"}},\n        ...     spec=PodSpec(containers=[Container(name=\"web\", image=\"nginx\")]),\n        ... )\n    \"\"\"\n\n    metadata: dict | None = None\n    spec: PodSpec\n</code></pre>"},{"location":"api/models/#volume","title":"Volume","text":""},{"location":"api/models/#k8smith.core.models.Volume","title":"<code>Volume</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Pod volume definition.</p> Example <p>Volume(name=\"config\", config_map={\"name\": \"my-config\"}) Volume(name=\"data\", empty_dir={}) Volume(name=\"secrets\", csi={\"driver\": \"secrets-store.csi.k8s.io\", \"readOnly\": True})</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class Volume(KubeModel):\n    \"\"\"Pod volume definition.\n\n    Example:\n        &gt;&gt;&gt; Volume(name=\"config\", config_map={\"name\": \"my-config\"})\n        &gt;&gt;&gt; Volume(name=\"data\", empty_dir={})\n        &gt;&gt;&gt; Volume(name=\"secrets\", csi={\"driver\": \"secrets-store.csi.k8s.io\", \"readOnly\": True})\n    \"\"\"\n\n    name: str\n    config_map: dict | None = Field(default=None, alias=\"configMap\")\n    secret: dict | None = None\n    empty_dir: dict | None = Field(default=None, alias=\"emptyDir\")\n    persistent_volume_claim: dict | None = Field(default=None, alias=\"persistentVolumeClaim\")\n    host_path: dict | None = Field(default=None, alias=\"hostPath\")\n    projected: dict | None = None\n    downward_api: dict | None = Field(default=None, alias=\"downwardAPI\")\n    csi: dict | None = None\n</code></pre>"},{"location":"api/models/#volumemount","title":"VolumeMount","text":""},{"location":"api/models/#k8smith.core.models.VolumeMount","title":"<code>VolumeMount</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Container volume mount.</p> Example <p>VolumeMount(name=\"config\", mount_path=\"/etc/config\", read_only=True)</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class VolumeMount(KubeModel):\n    \"\"\"Container volume mount.\n\n    Example:\n        &gt;&gt;&gt; VolumeMount(name=\"config\", mount_path=\"/etc/config\", read_only=True)\n    \"\"\"\n\n    name: str\n    mount_path: str = Field(alias=\"mountPath\")\n    read_only: bool | None = Field(default=None, alias=\"readOnly\")\n    sub_path: str | None = Field(default=None, alias=\"subPath\")\n    sub_path_expr: str | None = Field(default=None, alias=\"subPathExpr\")\n</code></pre>"},{"location":"api/models/#envvar","title":"EnvVar","text":""},{"location":"api/models/#k8smith.core.models.EnvVar","title":"<code>EnvVar</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Environment variable.</p> Example <p>EnvVar(name=\"DATABASE_URL\", value=\"postgres://localhost/db\") EnvVar(name=\"POD_NAME\", value_from={\"fieldRef\": {\"fieldPath\": \"metadata.name\"}})</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class EnvVar(KubeModel):\n    \"\"\"Environment variable.\n\n    Example:\n        &gt;&gt;&gt; EnvVar(name=\"DATABASE_URL\", value=\"postgres://localhost/db\")\n        &gt;&gt;&gt; EnvVar(name=\"POD_NAME\", value_from={\"fieldRef\": {\"fieldPath\": \"metadata.name\"}})\n    \"\"\"\n\n    name: str\n    value: str | None = None\n    value_from: dict | None = Field(default=None, alias=\"valueFrom\")\n</code></pre>"},{"location":"api/models/#probe","title":"Probe","text":""},{"location":"api/models/#k8smith.core.models.Probe","title":"<code>Probe</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Liveness/Readiness/Startup probe configuration.</p> Example <p>Probe( ...     http_get={\"path\": \"/health\", \"port\": 8080}, ...     initial_delay_seconds=30, ...     period_seconds=10, ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class Probe(KubeModel):\n    \"\"\"Liveness/Readiness/Startup probe configuration.\n\n    Example:\n        &gt;&gt;&gt; Probe(\n        ...     http_get={\"path\": \"/health\", \"port\": 8080},\n        ...     initial_delay_seconds=30,\n        ...     period_seconds=10,\n        ... )\n    \"\"\"\n\n    http_get: dict | None = Field(default=None, alias=\"httpGet\")\n    tcp_socket: dict | None = Field(default=None, alias=\"tcpSocket\")\n    exec_: dict | None = Field(default=None, alias=\"exec\")\n    grpc: dict | None = None\n    initial_delay_seconds: int | None = Field(default=None, alias=\"initialDelaySeconds\")\n    period_seconds: int | None = Field(default=None, alias=\"periodSeconds\")\n    timeout_seconds: int | None = Field(default=None, alias=\"timeoutSeconds\")\n    success_threshold: int | None = Field(default=None, alias=\"successThreshold\")\n    failure_threshold: int | None = Field(default=None, alias=\"failureThreshold\")\n</code></pre>"},{"location":"api/models/#resourcerequirements","title":"ResourceRequirements","text":""},{"location":"api/models/#k8smith.core.models.ResourceRequirements","title":"<code>ResourceRequirements</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Container resource requests and limits.</p> Example <p>ResourceRequirements( ...     requests=ResourceQuantity(cpu=\"100m\", memory=\"128Mi\"), ...     limits=ResourceQuantity(memory=\"256Mi\"), ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class ResourceRequirements(KubeModel):\n    \"\"\"Container resource requests and limits.\n\n    Example:\n        &gt;&gt;&gt; ResourceRequirements(\n        ...     requests=ResourceQuantity(cpu=\"100m\", memory=\"128Mi\"),\n        ...     limits=ResourceQuantity(memory=\"256Mi\"),\n        ... )\n    \"\"\"\n\n    requests: ResourceQuantity | None = None\n    limits: ResourceQuantity | None = None\n</code></pre>"},{"location":"api/models/#resourcequantity","title":"ResourceQuantity","text":""},{"location":"api/models/#k8smith.core.models.ResourceQuantity","title":"<code>ResourceQuantity</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Kubernetes resource quantity (e.g., '100m', '512Mi', '2Gi').</p> Example <p>ResourceQuantity(cpu=\"100m\", memory=\"512Mi\") ResourceQuantity(memory=\"4Gi\", extended={\"nvidia.com/gpu\": \"1\"})</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class ResourceQuantity(KubeModel):\n    \"\"\"Kubernetes resource quantity (e.g., '100m', '512Mi', '2Gi').\n\n    Example:\n        &gt;&gt;&gt; ResourceQuantity(cpu=\"100m\", memory=\"512Mi\")\n        &gt;&gt;&gt; ResourceQuantity(memory=\"4Gi\", extended={\"nvidia.com/gpu\": \"1\"})\n    \"\"\"\n\n    cpu: str | None = None\n    memory: str | None = None\n    extended: dict[str, str] = Field(default_factory=dict)\n\n    @model_serializer\n    def serialize(self) -&gt; dict[str, str]:\n        \"\"\"Flatten extended resources into the main dict.\"\"\"\n        result: dict[str, str] = {}\n        if self.cpu:\n            result[\"cpu\"] = self.cpu\n        if self.memory:\n            result[\"memory\"] = self.memory\n        # Flatten extended resources (e.g., nvidia.com/gpu)\n        result.update(self.extended)\n        return result\n</code></pre>"},{"location":"api/models/#k8smith.core.models.ResourceQuantity.serialize","title":"<code>serialize()</code>","text":"<p>Flatten extended resources into the main dict.</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>@model_serializer\ndef serialize(self) -&gt; dict[str, str]:\n    \"\"\"Flatten extended resources into the main dict.\"\"\"\n    result: dict[str, str] = {}\n    if self.cpu:\n        result[\"cpu\"] = self.cpu\n    if self.memory:\n        result[\"memory\"] = self.memory\n    # Flatten extended resources (e.g., nvidia.com/gpu)\n    result.update(self.extended)\n    return result\n</code></pre>"},{"location":"api/models/#security","title":"Security","text":""},{"location":"api/models/#securitycontext","title":"SecurityContext","text":""},{"location":"api/models/#k8smith.core.models.SecurityContext","title":"<code>SecurityContext</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Container security context.</p> Example <p>SecurityContext( ...     run_as_non_root=True, ...     read_only_root_filesystem=True, ...     allow_privilege_escalation=False, ... )</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class SecurityContext(KubeModel):\n    \"\"\"Container security context.\n\n    Example:\n        &gt;&gt;&gt; SecurityContext(\n        ...     run_as_non_root=True,\n        ...     read_only_root_filesystem=True,\n        ...     allow_privilege_escalation=False,\n        ... )\n    \"\"\"\n\n    run_as_user: int | None = Field(default=None, alias=\"runAsUser\")\n    run_as_group: int | None = Field(default=None, alias=\"runAsGroup\")\n    run_as_non_root: bool | None = Field(default=None, alias=\"runAsNonRoot\")\n    read_only_root_filesystem: bool | None = Field(default=None, alias=\"readOnlyRootFilesystem\")\n    privileged: bool | None = None\n    allow_privilege_escalation: bool | None = Field(default=None, alias=\"allowPrivilegeEscalation\")\n    capabilities: dict | None = None\n    seccomp_profile: dict | None = Field(default=None, alias=\"seccompProfile\")\n</code></pre>"},{"location":"api/models/#podsecuritycontext","title":"PodSecurityContext","text":""},{"location":"api/models/#k8smith.core.models.PodSecurityContext","title":"<code>PodSecurityContext</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Pod-level security context.</p> Example <p>PodSecurityContext(run_as_non_root=True, fs_group=1000)</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class PodSecurityContext(KubeModel):\n    \"\"\"Pod-level security context.\n\n    Example:\n        &gt;&gt;&gt; PodSecurityContext(run_as_non_root=True, fs_group=1000)\n    \"\"\"\n\n    run_as_user: int | None = Field(default=None, alias=\"runAsUser\")\n    run_as_group: int | None = Field(default=None, alias=\"runAsGroup\")\n    run_as_non_root: bool | None = Field(default=None, alias=\"runAsNonRoot\")\n    fs_group: int | None = Field(default=None, alias=\"fsGroup\")\n    fs_group_change_policy: str | None = Field(default=None, alias=\"fsGroupChangePolicy\")\n    supplemental_groups: list[int] | None = Field(default=None, alias=\"supplementalGroups\")\n    seccomp_profile: dict | None = Field(default=None, alias=\"seccompProfile\")\n</code></pre>"},{"location":"api/models/#networking","title":"Networking","text":""},{"location":"api/models/#serviceport","title":"ServicePort","text":""},{"location":"api/models/#k8smith.core.models.ServicePort","title":"<code>ServicePort</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Service port configuration.</p> Example <p>ServicePort(port=80, target_port=8080, name=\"http\")</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class ServicePort(KubeModel):\n    \"\"\"Service port configuration.\n\n    Example:\n        &gt;&gt;&gt; ServicePort(port=80, target_port=8080, name=\"http\")\n    \"\"\"\n\n    port: int\n    target_port: int | str | None = Field(default=None, alias=\"targetPort\")\n    name: str | None = None\n    protocol: Literal[\"TCP\", \"UDP\", \"SCTP\"] | None = None\n    node_port: int | None = Field(default=None, alias=\"nodePort\")\n    app_protocol: str | None = Field(default=None, alias=\"appProtocol\")\n</code></pre>"},{"location":"api/models/#containerport","title":"ContainerPort","text":""},{"location":"api/models/#k8smith.core.models.ContainerPort","title":"<code>ContainerPort</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Container port configuration.</p> Example <p>ContainerPort(container_port=8080, name=\"http\") ContainerPort(container_port=80, host_port=8080)</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class ContainerPort(KubeModel):\n    \"\"\"Container port configuration.\n\n    Example:\n        &gt;&gt;&gt; ContainerPort(container_port=8080, name=\"http\")\n        &gt;&gt;&gt; ContainerPort(container_port=80, host_port=8080)\n    \"\"\"\n\n    container_port: int = Field(alias=\"containerPort\")\n    host_port: int | None = Field(default=None, alias=\"hostPort\")\n    host_ip: str | None = Field(default=None, alias=\"hostIP\")\n    name: str | None = None\n    protocol: Literal[\"TCP\", \"UDP\", \"SCTP\"] = \"TCP\"\n</code></pre>"},{"location":"api/models/#scheduling","title":"Scheduling","text":""},{"location":"api/models/#toleration","title":"Toleration","text":""},{"location":"api/models/#k8smith.core.models.Toleration","title":"<code>Toleration</code>","text":"<p>               Bases: <code>KubeModel</code></p> <p>Pod toleration.</p> Example <p>Toleration(key=\"nvidia.com/gpu\", operator=\"Exists\", effect=\"NoSchedule\")</p> Source code in <code>src/k8smith/core/models.py</code> <pre><code>class Toleration(KubeModel):\n    \"\"\"Pod toleration.\n\n    Example:\n        &gt;&gt;&gt; Toleration(key=\"nvidia.com/gpu\", operator=\"Exists\", effect=\"NoSchedule\")\n    \"\"\"\n\n    key: str | None = None\n    operator: Literal[\"Exists\", \"Equal\"] | None = None\n    value: str | None = None\n    effect: Literal[\"NoSchedule\", \"PreferNoSchedule\", \"NoExecute\"] | None = None\n    toleration_seconds: int | None = Field(default=None, alias=\"tolerationSeconds\")\n</code></pre>"},{"location":"api/output/","title":"Output","text":"<p>Utilities for collecting and serializing manifests.</p>"},{"location":"api/output/#manifest-collection","title":"Manifest Collection","text":""},{"location":"api/output/#k8smith.output.manifest.Manifest","title":"<code>Manifest</code>  <code>dataclass</code>","text":"<p>A collection of Kubernetes resources.</p> Example <p>manifest = Manifest() manifest.add({\"apiVersion\": \"v1\", \"kind\": \"Namespace\", \"metadata\": {\"name\": \"test\"}}) manifest.add(build_deployment(spec)) print(manifest.to_yaml()) manifest.write(\"manifests/app.yaml\")</p> Source code in <code>src/k8smith/output/manifest.py</code> <pre><code>@dataclass\nclass Manifest:\n    \"\"\"A collection of Kubernetes resources.\n\n    Example:\n        &gt;&gt;&gt; manifest = Manifest()\n        &gt;&gt;&gt; manifest.add({\"apiVersion\": \"v1\", \"kind\": \"Namespace\", \"metadata\": {\"name\": \"test\"}})\n        &gt;&gt;&gt; manifest.add(build_deployment(spec))\n        &gt;&gt;&gt; print(manifest.to_yaml())\n        &gt;&gt;&gt; manifest.write(\"manifests/app.yaml\")\n    \"\"\"\n\n    resources: list[dict] = field(default_factory=list)\n\n    def add(self, resource: dict) -&gt; Manifest:\n        \"\"\"Add a resource to the manifest.\n\n        Args:\n            resource: A Kubernetes resource dict\n\n        Returns:\n            Self for chaining\n        \"\"\"\n        self.resources.append(resource)\n        return self\n\n    def add_all(self, resources: list[dict]) -&gt; Manifest:\n        \"\"\"Add multiple resources to the manifest.\n\n        Args:\n            resources: List of Kubernetes resource dicts\n\n        Returns:\n            Self for chaining\n        \"\"\"\n        self.resources.extend(resources)\n        return self\n\n    def to_yaml(self) -&gt; str:\n        \"\"\"Serialize to YAML string.\n\n        Returns:\n            YAML string with --- document separators\n        \"\"\"\n        return dump(self.resources)\n\n    def write(self, path: str | Path) -&gt; None:\n        \"\"\"Write manifest to a file.\n\n        Args:\n            path: File path to write to\n        \"\"\"\n        path = Path(path)\n        path.parent.mkdir(parents=True, exist_ok=True)\n        path.write_text(self.to_yaml())\n\n    @classmethod\n    def from_yaml(cls, yaml_str: str) -&gt; Manifest:\n        \"\"\"Load manifest from a YAML string.\n\n        Args:\n            yaml_str: YAML string with one or more documents\n\n        Returns:\n            Manifest containing the loaded resources\n        \"\"\"\n        return cls(resources=load(yaml_str))\n\n    @classmethod\n    def from_file(cls, path: str | Path) -&gt; Manifest:\n        \"\"\"Load manifest from a file.\n\n        Args:\n            path: Path to YAML file\n\n        Returns:\n            Manifest containing the loaded resources\n        \"\"\"\n        path = Path(path)\n        return cls.from_yaml(path.read_text())\n\n    def filter(\n        self,\n        *,\n        kind: str | None = None,\n        namespace: str | None = None,\n        name: str | None = None,\n        labels: dict[str, str] | None = None,\n    ) -&gt; Manifest:\n        \"\"\"Filter resources by criteria.\n\n        Args:\n            kind: Filter by resource kind (e.g., \"Deployment\")\n            namespace: Filter by namespace\n            name: Filter by resource name\n            labels: Filter by labels (all must match)\n\n        Returns:\n            New Manifest with filtered resources\n        \"\"\"\n        filtered = []\n        for r in self.resources:\n            if kind and r.get(\"kind\") != kind:\n                continue\n            if namespace and r.get(\"metadata\", {}).get(\"namespace\") != namespace:\n                continue\n            if name and r.get(\"metadata\", {}).get(\"name\") != name:\n                continue\n            if labels:\n                resource_labels = r.get(\"metadata\", {}).get(\"labels\", {})\n                if not all(resource_labels.get(k) == v for k, v in labels.items()):\n                    continue\n            filtered.append(r)\n        return Manifest(resources=filtered)\n\n    def __len__(self) -&gt; int:\n        \"\"\"Return the number of resources in the manifest.\"\"\"\n        return len(self.resources)\n\n    def __iter__(self) -&gt; Iterator[dict[str, Any]]:\n        \"\"\"Iterate over resources.\"\"\"\n        return iter(self.resources)\n\n    def __getitem__(self, index: int) -&gt; dict:\n        \"\"\"Get a resource by index.\"\"\"\n        return self.resources[index]\n</code></pre>"},{"location":"api/output/#k8smith.output.manifest.Manifest.add","title":"<code>add(resource)</code>","text":"<p>Add a resource to the manifest.</p> <p>Parameters:</p> Name Type Description Default <code>resource</code> <code>dict</code> <p>A Kubernetes resource dict</p> required <p>Returns:</p> Type Description <code>Manifest</code> <p>Self for chaining</p> Source code in <code>src/k8smith/output/manifest.py</code> <pre><code>def add(self, resource: dict) -&gt; Manifest:\n    \"\"\"Add a resource to the manifest.\n\n    Args:\n        resource: A Kubernetes resource dict\n\n    Returns:\n        Self for chaining\n    \"\"\"\n    self.resources.append(resource)\n    return self\n</code></pre>"},{"location":"api/output/#k8smith.output.manifest.Manifest.to_yaml","title":"<code>to_yaml()</code>","text":"<p>Serialize to YAML string.</p> <p>Returns:</p> Type Description <code>str</code> <p>YAML string with --- document separators</p> Source code in <code>src/k8smith/output/manifest.py</code> <pre><code>def to_yaml(self) -&gt; str:\n    \"\"\"Serialize to YAML string.\n\n    Returns:\n        YAML string with --- document separators\n    \"\"\"\n    return dump(self.resources)\n</code></pre>"},{"location":"api/output/#yaml-serialization","title":"YAML Serialization","text":""},{"location":"api/output/#k8smith.output.yaml.dump","title":"<code>dump(resources)</code>","text":"<p>Dump resources to a YAML string with document separators.</p> <p>Parameters:</p> Name Type Description Default <code>resources</code> <code>list[dict]</code> <p>List of Kubernetes resource dicts</p> required <p>Returns:</p> Type Description <code>str</code> <p>YAML string with --- document separators</p> Example <p>resources = [{\"apiVersion\": \"v1\", \"kind\": \"Namespace\", \"metadata\": {\"name\": \"test\"}}] print(dump(resources)) apiVersion: v1 kind: Namespace metadata:   name: test</p> Source code in <code>src/k8smith/output/yaml.py</code> <pre><code>def dump(resources: list[dict]) -&gt; str:\n    \"\"\"Dump resources to a YAML string with document separators.\n\n    Args:\n        resources: List of Kubernetes resource dicts\n\n    Returns:\n        YAML string with --- document separators\n\n    Example:\n        &gt;&gt;&gt; resources = [{\"apiVersion\": \"v1\", \"kind\": \"Namespace\", \"metadata\": {\"name\": \"test\"}}]\n        &gt;&gt;&gt; print(dump(resources))\n        apiVersion: v1\n        kind: Namespace\n        metadata:\n          name: test\n    \"\"\"\n    if not resources:\n        return \"\"\n\n    docs = []\n    for resource in resources:\n        doc = yaml.dump(\n            resource,\n            Dumper=KubernetesYamlDumper,\n            default_flow_style=False,\n            sort_keys=False,\n            allow_unicode=True,\n        )\n        docs.append(doc.rstrip())\n\n    return \"\\n---\\n\".join(docs) + \"\\n\"\n</code></pre>"},{"location":"api/output/#k8smith.output.yaml.dump_one","title":"<code>dump_one(resource)</code>","text":"<p>Dump a single resource to YAML.</p> <p>Parameters:</p> Name Type Description Default <code>resource</code> <code>dict</code> <p>A Kubernetes resource dict</p> required <p>Returns:</p> Type Description <code>str</code> <p>YAML string</p> Source code in <code>src/k8smith/output/yaml.py</code> <pre><code>def dump_one(resource: dict) -&gt; str:\n    \"\"\"Dump a single resource to YAML.\n\n    Args:\n        resource: A Kubernetes resource dict\n\n    Returns:\n        YAML string\n    \"\"\"\n    return yaml.dump(\n        resource,\n        Dumper=KubernetesYamlDumper,\n        default_flow_style=False,\n        sort_keys=False,\n        allow_unicode=True,\n    )\n</code></pre>"},{"location":"api/output/#k8smith.output.yaml.load","title":"<code>load(yaml_str)</code>","text":"<p>Load resources from a YAML string.</p> <p>Parameters:</p> Name Type Description Default <code>yaml_str</code> <code>str</code> <p>YAML string (may contain multiple documents separated by ---)</p> required <p>Returns:</p> Type Description <code>list[dict]</code> <p>List of resource dicts</p> Source code in <code>src/k8smith/output/yaml.py</code> <pre><code>def load(yaml_str: str) -&gt; list[dict]:\n    \"\"\"Load resources from a YAML string.\n\n    Args:\n        yaml_str: YAML string (may contain multiple documents separated by ---)\n\n    Returns:\n        List of resource dicts\n    \"\"\"\n    return [doc for doc in yaml.safe_load_all(yaml_str) if doc]\n</code></pre>"},{"location":"api/validation/","title":"Validation","text":"<p>Optional manifest validation utilities.</p>"},{"location":"api/validation/#usage","title":"Usage","text":"<pre><code>from k8smith.validation import validate_manifest, ValidationMode\n\nresult = validate_manifest(\n    manifest,\n    structural=ValidationMode.STRICT,\n    cross_reference=ValidationMode.CHECK,\n    best_practice=ValidationMode.NONE,\n)\n\nif result.errors:\n    print(\"Errors:\", result.errors)\nif result.warnings:\n    print(\"Warnings:\", result.warnings)\n</code></pre>"},{"location":"api/validation/#validation-modes","title":"Validation Modes","text":""},{"location":"api/validation/#k8smith.validation.core.ValidationMode","title":"<code>ValidationMode</code>","text":"<p>               Bases: <code>Enum</code></p> <p>Validation mode controlling how issues are reported.</p> <p>Attributes:</p> Name Type Description <code>NONE</code> <p>Silent - no warnings or errors raised</p> <code>CHECK</code> <p>Emit warnings for issues but don't raise exceptions</p> <code>STRICT</code> <p>Raise exception containing all detected issues</p> Source code in <code>src/k8smith/validation/core.py</code> <pre><code>class ValidationMode(Enum):\n    \"\"\"Validation mode controlling how issues are reported.\n\n    Attributes:\n        NONE: Silent - no warnings or errors raised\n        CHECK: Emit warnings for issues but don't raise exceptions\n        STRICT: Raise exception containing all detected issues\n    \"\"\"\n\n    NONE = \"none\"\n    CHECK = \"check\"\n    STRICT = \"strict\"\n</code></pre>"},{"location":"api/validation/#functions","title":"Functions","text":""},{"location":"api/validation/#k8smith.validation.validators.validate_manifest","title":"<code>validate_manifest(manifest, *, structural=ValidationMode.STRICT, cross_reference=ValidationMode.NONE, best_practice=ValidationMode.NONE)</code>","text":"<p>Validate a Kubernetes manifest.</p> <p>Parameters:</p> Name Type Description Default <code>manifest</code> <code>dict[str, Any]</code> <p>The Kubernetes resource dict to validate</p> required <code>structural</code> <code>ValidationMode</code> <p>Mode for structural validation (required fields, valid combinations)</p> <code>STRICT</code> <code>cross_reference</code> <code>ValidationMode</code> <p>Mode for cross-reference validation (volumes, ports, selectors)</p> <code>NONE</code> <code>best_practice</code> <code>ValidationMode</code> <p>Mode for best practices validation (resources, probes)</p> <code>NONE</code> <p>Returns:</p> Type Description <code>ValidationResult</code> <p>ValidationResult containing all issues found</p> <p>Raises:</p> Type Description <code>ValidationError</code> <p>In strict mode, if any issues are found in that category</p> Example <p>manifest = build_deployment(spec) result = validate_manifest( ...     manifest, ...     structural=ValidationMode.STRICT, ...     cross_reference=ValidationMode.CHECK, ...     best_practice=ValidationMode.NONE, ... )</p> Source code in <code>src/k8smith/validation/validators.py</code> <pre><code>def validate_manifest(\n    manifest: dict[str, Any],\n    *,\n    structural: ValidationMode = ValidationMode.STRICT,\n    cross_reference: ValidationMode = ValidationMode.NONE,\n    best_practice: ValidationMode = ValidationMode.NONE,\n) -&gt; ValidationResult:\n    \"\"\"Validate a Kubernetes manifest.\n\n    Args:\n        manifest: The Kubernetes resource dict to validate\n        structural: Mode for structural validation (required fields, valid combinations)\n        cross_reference: Mode for cross-reference validation (volumes, ports, selectors)\n        best_practice: Mode for best practices validation (resources, probes)\n\n    Returns:\n        ValidationResult containing all issues found\n\n    Raises:\n        ValidationError: In strict mode, if any issues are found in that category\n\n    Example:\n        &gt;&gt;&gt; manifest = build_deployment(spec)\n        &gt;&gt;&gt; result = validate_manifest(\n        ...     manifest,\n        ...     structural=ValidationMode.STRICT,\n        ...     cross_reference=ValidationMode.CHECK,\n        ...     best_practice=ValidationMode.NONE,\n        ... )\n    \"\"\"\n    result = ValidationResult()\n\n    # Run validators based on mode\n    if structural != ValidationMode.NONE:\n        _validate_structural(manifest, result)\n        _handle_mode(result, structural, \"structural\")\n\n    if cross_reference != ValidationMode.NONE:\n        _validate_cross_reference(manifest, result)\n        _handle_mode(result, cross_reference, \"cross_reference\")\n\n    if best_practice != ValidationMode.NONE:\n        _validate_best_practice(manifest, result)\n        _handle_mode(result, best_practice, \"best_practice\")\n\n    return result\n</code></pre>"},{"location":"api/validation/#result-types","title":"Result Types","text":""},{"location":"api/validation/#k8smith.validation.core.ValidationResult","title":"<code>ValidationResult</code>  <code>dataclass</code>","text":"<p>Collection of validation issues from a validation run.</p> Supports iteration and boolean checks <p>if result:  # True if there are issues     for issue in result:         print(issue)</p> Source code in <code>src/k8smith/validation/core.py</code> <pre><code>@dataclass\nclass ValidationResult:\n    \"\"\"Collection of validation issues from a validation run.\n\n    Supports iteration and boolean checks:\n        if result:  # True if there are issues\n            for issue in result:\n                print(issue)\n    \"\"\"\n\n    issues: list[ValidationIssue] = field(default_factory=list)\n\n    def add(\n        self,\n        path: str,\n        message: str,\n        severity: ValidationSeverity,\n        category: Literal[\"structural\", \"cross_reference\", \"best_practice\"],\n    ) -&gt; None:\n        \"\"\"Add a validation issue.\"\"\"\n        self.issues.append(ValidationIssue(path, message, severity, category))\n\n    def error(\n        self,\n        path: str,\n        message: str,\n        category: Literal[\"structural\", \"cross_reference\", \"best_practice\"],\n    ) -&gt; None:\n        \"\"\"Add an error-level issue.\"\"\"\n        self.add(path, message, ValidationSeverity.ERROR, category)\n\n    def warning(\n        self,\n        path: str,\n        message: str,\n        category: Literal[\"structural\", \"cross_reference\", \"best_practice\"],\n    ) -&gt; None:\n        \"\"\"Add a warning-level issue.\"\"\"\n        self.add(path, message, ValidationSeverity.WARNING, category)\n\n    @property\n    def errors(self) -&gt; list[ValidationIssue]:\n        \"\"\"Get only error-level issues.\"\"\"\n        return [i for i in self.issues if i.severity == ValidationSeverity.ERROR]\n\n    @property\n    def warnings(self) -&gt; list[ValidationIssue]:\n        \"\"\"Get only warning-level issues.\"\"\"\n        return [i for i in self.issues if i.severity == ValidationSeverity.WARNING]\n\n    def __bool__(self) -&gt; bool:\n        \"\"\"True if there are any issues.\"\"\"\n        return len(self.issues) &gt; 0\n\n    def __iter__(self) -&gt; Iterator[ValidationIssue]:\n        return iter(self.issues)\n\n    def __len__(self) -&gt; int:\n        return len(self.issues)\n\n    def merge(self, other: ValidationResult) -&gt; None:\n        \"\"\"Merge issues from another result into this one.\"\"\"\n        self.issues.extend(other.issues)\n</code></pre>"},{"location":"api/validation/#k8smith.validation.core.ValidationResult.errors","title":"<code>errors</code>  <code>property</code>","text":"<p>Get only error-level issues.</p>"},{"location":"api/validation/#k8smith.validation.core.ValidationResult.warnings","title":"<code>warnings</code>  <code>property</code>","text":"<p>Get only warning-level issues.</p>"},{"location":"api/validation/#k8smith.validation.core.ValidationResult.add","title":"<code>add(path, message, severity, category)</code>","text":"<p>Add a validation issue.</p> Source code in <code>src/k8smith/validation/core.py</code> <pre><code>def add(\n    self,\n    path: str,\n    message: str,\n    severity: ValidationSeverity,\n    category: Literal[\"structural\", \"cross_reference\", \"best_practice\"],\n) -&gt; None:\n    \"\"\"Add a validation issue.\"\"\"\n    self.issues.append(ValidationIssue(path, message, severity, category))\n</code></pre>"},{"location":"api/validation/#k8smith.validation.core.ValidationResult.error","title":"<code>error(path, message, category)</code>","text":"<p>Add an error-level issue.</p> Source code in <code>src/k8smith/validation/core.py</code> <pre><code>def error(\n    self,\n    path: str,\n    message: str,\n    category: Literal[\"structural\", \"cross_reference\", \"best_practice\"],\n) -&gt; None:\n    \"\"\"Add an error-level issue.\"\"\"\n    self.add(path, message, ValidationSeverity.ERROR, category)\n</code></pre>"},{"location":"api/validation/#k8smith.validation.core.ValidationResult.warning","title":"<code>warning(path, message, category)</code>","text":"<p>Add a warning-level issue.</p> Source code in <code>src/k8smith/validation/core.py</code> <pre><code>def warning(\n    self,\n    path: str,\n    message: str,\n    category: Literal[\"structural\", \"cross_reference\", \"best_practice\"],\n) -&gt; None:\n    \"\"\"Add a warning-level issue.\"\"\"\n    self.add(path, message, ValidationSeverity.WARNING, category)\n</code></pre>"},{"location":"api/validation/#k8smith.validation.core.ValidationResult.__bool__","title":"<code>__bool__()</code>","text":"<p>True if there are any issues.</p> Source code in <code>src/k8smith/validation/core.py</code> <pre><code>def __bool__(self) -&gt; bool:\n    \"\"\"True if there are any issues.\"\"\"\n    return len(self.issues) &gt; 0\n</code></pre>"},{"location":"api/validation/#k8smith.validation.core.ValidationResult.merge","title":"<code>merge(other)</code>","text":"<p>Merge issues from another result into this one.</p> Source code in <code>src/k8smith/validation/core.py</code> <pre><code>def merge(self, other: ValidationResult) -&gt; None:\n    \"\"\"Merge issues from another result into this one.\"\"\"\n    self.issues.extend(other.issues)\n</code></pre>"},{"location":"api/validation/#k8smith.validation.core.ValidationIssue","title":"<code>ValidationIssue</code>  <code>dataclass</code>","text":"<p>A single validation issue found in a manifest.</p> <p>Attributes:</p> Name Type Description <code>path</code> <code>str</code> <p>JSON path to the problematic field (e.g., \"spec.template.spec.containers[0]\")</p> <code>message</code> <code>str</code> <p>Human-readable description of the issue</p> <code>severity</code> <code>ValidationSeverity</code> <p>Whether this is an error or warning</p> <code>category</code> <code>Literal['structural', 'cross_reference', 'best_practice']</code> <p>Type of validation that caught this (structural, cross_reference, best_practice)</p> Source code in <code>src/k8smith/validation/core.py</code> <pre><code>@dataclass\nclass ValidationIssue:\n    \"\"\"A single validation issue found in a manifest.\n\n    Attributes:\n        path: JSON path to the problematic field (e.g., \"spec.template.spec.containers[0]\")\n        message: Human-readable description of the issue\n        severity: Whether this is an error or warning\n        category: Type of validation that caught this (structural, cross_reference, best_practice)\n    \"\"\"\n\n    path: str\n    message: str\n    severity: ValidationSeverity\n    category: Literal[\"structural\", \"cross_reference\", \"best_practice\"]\n\n    def __str__(self) -&gt; str:\n        prefix = \"ERROR\" if self.severity == ValidationSeverity.ERROR else \"WARNING\"\n        return f\"[{prefix}] {self.path}: {self.message}\"\n</code></pre>"},{"location":"guides/gke/","title":"GKE Resources","text":"<p>k8smith includes extensions for Google Kubernetes Engine (GKE) specific resources.</p>"},{"location":"guides/gke/#gateway-api","title":"Gateway API","text":""},{"location":"guides/gke/#gateway","title":"Gateway","text":"<p>Create a GKE Gateway for external load balancing:</p> <pre><code>from k8smith.gke import GatewaySpec, build_gateway\n\ngateway = build_gateway(\n    GatewaySpec(\n        name=\"main-gateway\",\n        namespace=\"gateway\",\n        gateway_class_name=\"gke-l7-global-external-managed\",\n        listeners=[\n            {\n                \"name\": \"https\",\n                \"port\": 443,\n                \"protocol\": \"HTTPS\",\n                \"tls\": {\n                    \"mode\": \"Terminate\",\n                    \"certificateRefs\": [\n                        {\"name\": \"my-cert\", \"kind\": \"Secret\"}\n                    ],\n                },\n            },\n            {\n                \"name\": \"http\",\n                \"port\": 80,\n                \"protocol\": \"HTTP\",\n            },\n        ],\n    )\n)\n</code></pre>"},{"location":"guides/gke/#httproute","title":"HTTPRoute","text":"<p>Route traffic to your services:</p> <pre><code>from k8smith.gke import HTTPRouteSpec, build_httproute\n\nroute = build_httproute(\n    HTTPRouteSpec(\n        name=\"api-route\",\n        namespace=\"production\",\n        parent_refs=[\n            {\"name\": \"main-gateway\", \"namespace\": \"gateway\"}\n        ],\n        hostnames=[\"api.example.com\"],\n        rules=[\n            {\n                \"matches\": [{\"path\": {\"type\": \"PathPrefix\", \"value\": \"/v1\"}}],\n                \"backendRefs\": [\n                    {\"name\": \"api-v1\", \"port\": 80}\n                ],\n            },\n            {\n                \"matches\": [{\"path\": {\"type\": \"PathPrefix\", \"value\": \"/v2\"}}],\n                \"backendRefs\": [\n                    {\"name\": \"api-v2\", \"port\": 80}\n                ],\n            },\n        ],\n    )\n)\n</code></pre>"},{"location":"guides/gke/#health-check-policy","title":"Health Check Policy","text":"<p>Configure custom health checks for your backends:</p> <pre><code>from k8smith.gke import HealthCheckPolicySpec, build_healthcheckpolicy\n\npolicy = build_healthcheckpolicy(\n    HealthCheckPolicySpec(\n        name=\"api-healthcheck\",\n        namespace=\"production\",\n        target_ref={\n            \"group\": \"\",\n            \"kind\": \"Service\",\n            \"name\": \"api-service\",\n        },\n        config={\n            \"type\": \"HTTP\",\n            \"httpHealthCheck\": {\n                \"port\": 8080,\n                \"requestPath\": \"/healthz\",\n            },\n            \"checkIntervalSec\": 15,\n            \"timeoutSec\": 5,\n            \"healthyThreshold\": 2,\n            \"unhealthyThreshold\": 3,\n        },\n    )\n)\n</code></pre>"},{"location":"guides/gke/#gcp-backend-policy","title":"GCP Backend Policy","text":"<p>Configure backend service settings like Cloud CDN and IAP:</p> <pre><code>from k8smith.gke import GCPBackendPolicySpec, build_gcp_backend_policy\n\npolicy = build_gcp_backend_policy(\n    GCPBackendPolicySpec(\n        name=\"api-backend-policy\",\n        namespace=\"production\",\n        target_ref={\n            \"group\": \"\",\n            \"kind\": \"Service\",\n            \"name\": \"api-service\",\n        },\n        default={\n            \"connectionDraining\": {\"drainingTimeoutSec\": 30},\n            \"logging\": {\"enabled\": True, \"sampleRate\": 1.0},\n            \"securityPolicy\": \"my-security-policy\",\n        },\n    )\n)\n</code></pre>"},{"location":"guides/gke/#with-cloud-cdn","title":"With Cloud CDN","text":"<pre><code>policy = build_gcp_backend_policy(\n    GCPBackendPolicySpec(\n        name=\"static-backend-policy\",\n        namespace=\"production\",\n        target_ref={\n            \"group\": \"\",\n            \"kind\": \"Service\",\n            \"name\": \"static-assets\",\n        },\n        default={\n            \"cdn\": {\n                \"enabled\": True,\n                \"cachePolicy\": {\n                    \"includeHost\": True,\n                    \"includeProtocol\": True,\n                    \"includeQueryString\": False,\n                },\n            },\n        },\n    )\n)\n</code></pre>"},{"location":"guides/gke/#podmonitoring","title":"PodMonitoring","text":"<p>Set up Prometheus-style monitoring with Google Cloud Managed Prometheus:</p> <pre><code>from k8smith.gke import PodMonitoringSpec, build_pod_monitoring\n\nmonitoring = build_pod_monitoring(\n    PodMonitoringSpec(\n        name=\"api-monitoring\",\n        namespace=\"production\",\n        selector={\"app\": \"api-server\"},\n        endpoints=[\n            {\n                \"port\": \"metrics\",\n                \"interval\": \"30s\",\n                \"path\": \"/metrics\",\n            }\n        ],\n    )\n)\n</code></pre>"},{"location":"guides/gke/#clusterpodmonitoring","title":"ClusterPodMonitoring","text":"<p>For cluster-wide monitoring:</p> <pre><code>from k8smith.gke import ClusterPodMonitoringSpec, build_cluster_pod_monitoring\n\nmonitoring = build_cluster_pod_monitoring(\n    ClusterPodMonitoringSpec(\n        name=\"all-apps-monitoring\",\n        selector={\"monitored\": \"true\"},\n        endpoints=[\n            {\n                \"port\": \"metrics\",\n                \"interval\": \"30s\",\n            }\n        ],\n    )\n)\n</code></pre>"},{"location":"guides/gke/#complete-example","title":"Complete Example","text":"<p>Here's a complete example setting up a GKE ingress stack:</p> <pre><code>from k8smith import Manifest\nfrom k8smith.gke import (\n    GatewaySpec,\n    HTTPRouteSpec,\n    HealthCheckPolicySpec,\n    GCPBackendPolicySpec,\n    PodMonitoringSpec,\n    build_gateway,\n    build_httproute,\n    build_healthcheckpolicy,\n    build_gcp_backend_policy,\n    build_pod_monitoring,\n)\n\nmanifest = Manifest()\n\n# Gateway\nmanifest.add(\n    build_gateway(\n        GatewaySpec(\n            name=\"external-gateway\",\n            namespace=\"gateway\",\n            gateway_class_name=\"gke-l7-global-external-managed\",\n            listeners=[\n                {\"name\": \"https\", \"port\": 443, \"protocol\": \"HTTPS\"},\n            ],\n        )\n    )\n)\n\n# HTTPRoute\nmanifest.add(\n    build_httproute(\n        HTTPRouteSpec(\n            name=\"app-routes\",\n            namespace=\"production\",\n            parent_refs=[{\"name\": \"external-gateway\", \"namespace\": \"gateway\"}],\n            hostnames=[\"app.example.com\"],\n            rules=[\n                {\n                    \"matches\": [{\"path\": {\"type\": \"PathPrefix\", \"value\": \"/\"}}],\n                    \"backendRefs\": [{\"name\": \"app-service\", \"port\": 80}],\n                }\n            ],\n        )\n    )\n)\n\n# Health Check\nmanifest.add(\n    build_healthcheckpolicy(\n        HealthCheckPolicySpec(\n            name=\"app-healthcheck\",\n            namespace=\"production\",\n            target_ref={\"group\": \"\", \"kind\": \"Service\", \"name\": \"app-service\"},\n            config={\n                \"type\": \"HTTP\",\n                \"httpHealthCheck\": {\"port\": 8080, \"requestPath\": \"/healthz\"},\n            },\n        )\n    )\n)\n\n# Monitoring\nmanifest.add(\n    build_pod_monitoring(\n        PodMonitoringSpec(\n            name=\"app-monitoring\",\n            namespace=\"production\",\n            selector={\"app\": \"app-service\"},\n            endpoints=[{\"port\": \"metrics\", \"interval\": \"30s\"}],\n        )\n    )\n)\n\nprint(manifest.to_yaml())\n</code></pre>"},{"location":"guides/rbac/","title":"RBAC","text":"<p>k8smith provides full support for Kubernetes Role-Based Access Control (RBAC) resources.</p>"},{"location":"guides/rbac/#roles-and-clusterroles","title":"Roles and ClusterRoles","text":""},{"location":"guides/rbac/#namespace-scoped-role","title":"Namespace-scoped Role","text":"<pre><code>from k8smith import RoleSpec, PolicyRule, build_role\n\nrole = build_role(\n    RoleSpec(\n        name=\"pod-reader\",\n        namespace=\"default\",\n        rules=[\n            PolicyRule(\n                api_groups=[\"\"],\n                resources=[\"pods\"],\n                verbs=[\"get\", \"watch\", \"list\"],\n            ),\n        ],\n    )\n)\n</code></pre>"},{"location":"guides/rbac/#cluster-scoped-clusterrole","title":"Cluster-scoped ClusterRole","text":"<pre><code>from k8smith import ClusterRoleSpec, PolicyRule, build_clusterrole\n\ncluster_role = build_clusterrole(\n    ClusterRoleSpec(\n        name=\"node-reader\",\n        rules=[\n            PolicyRule(\n                api_groups=[\"\"],\n                resources=[\"nodes\"],\n                verbs=[\"get\", \"watch\", \"list\"],\n            ),\n        ],\n    )\n)\n</code></pre>"},{"location":"guides/rbac/#multiple-rules","title":"Multiple Rules","text":"<pre><code>cluster_role = build_clusterrole(\n    ClusterRoleSpec(\n        name=\"deployment-manager\",\n        rules=[\n            PolicyRule(\n                api_groups=[\"apps\"],\n                resources=[\"deployments\"],\n                verbs=[\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\", \"delete\"],\n            ),\n            PolicyRule(\n                api_groups=[\"\"],\n                resources=[\"pods\", \"pods/log\"],\n                verbs=[\"get\", \"list\", \"watch\"],\n            ),\n            PolicyRule(\n                api_groups=[\"\"],\n                resources=[\"configmaps\", \"secrets\"],\n                verbs=[\"get\", \"list\"],\n            ),\n        ],\n    )\n)\n</code></pre>"},{"location":"guides/rbac/#rolebindings-and-clusterrolebindings","title":"RoleBindings and ClusterRoleBindings","text":""},{"location":"guides/rbac/#binding-a-role-to-a-user","title":"Binding a Role to a User","text":"<pre><code>from k8smith import (\n    RoleBindingSpec,\n    RoleBindingSubject,\n    RoleRef,\n    build_rolebinding,\n)\n\nbinding = build_rolebinding(\n    RoleBindingSpec(\n        name=\"read-pods\",\n        namespace=\"default\",\n        subjects=[\n            RoleBindingSubject(\n                kind=\"User\",\n                name=\"jane@example.com\",\n                api_group=\"rbac.authorization.k8s.io\",\n            ),\n        ],\n        role_ref=RoleRef(\n            kind=\"Role\",\n            name=\"pod-reader\",\n        ),\n    )\n)\n</code></pre>"},{"location":"guides/rbac/#binding-a-clusterrole-to-a-serviceaccount","title":"Binding a ClusterRole to a ServiceAccount","text":"<pre><code>from k8smith import (\n    ClusterRoleBindingSpec,\n    RoleBindingSubject,\n    RoleRef,\n    build_clusterrolebinding,\n)\n\nbinding = build_clusterrolebinding(\n    ClusterRoleBindingSpec(\n        name=\"monitoring-view\",\n        subjects=[\n            RoleBindingSubject(\n                kind=\"ServiceAccount\",\n                name=\"prometheus\",\n                namespace=\"monitoring\",\n            ),\n        ],\n        role_ref=RoleRef(\n            kind=\"ClusterRole\",\n            name=\"view\",\n        ),\n    )\n)\n</code></pre>"},{"location":"guides/rbac/#binding-to-a-group","title":"Binding to a Group","text":"<pre><code>binding = build_clusterrolebinding(\n    ClusterRoleBindingSpec(\n        name=\"admin-group\",\n        subjects=[\n            RoleBindingSubject(\n                kind=\"Group\",\n                name=\"system:admins\",\n                api_group=\"rbac.authorization.k8s.io\",\n            ),\n        ],\n        role_ref=RoleRef(\n            kind=\"ClusterRole\",\n            name=\"cluster-admin\",\n        ),\n    )\n)\n</code></pre>"},{"location":"guides/rbac/#complete-example","title":"Complete Example","text":"<p>Here's a complete example setting up RBAC for an application:</p> <pre><code>from k8smith import (\n    Manifest,\n    ServiceAccountSpec,\n    RoleSpec,\n    RoleBindingSpec,\n    PolicyRule,\n    RoleBindingSubject,\n    RoleRef,\n    build_serviceaccount,\n    build_role,\n    build_rolebinding,\n)\n\nNAMESPACE = \"myapp\"\nAPP_NAME = \"worker\"\n\nmanifest = Manifest()\n\n# Create ServiceAccount\nmanifest.add(\n    build_serviceaccount(\n        ServiceAccountSpec(\n            name=APP_NAME,\n            namespace=NAMESPACE,\n        )\n    )\n)\n\n# Create Role with required permissions\nmanifest.add(\n    build_role(\n        RoleSpec(\n            name=f\"{APP_NAME}-role\",\n            namespace=NAMESPACE,\n            rules=[\n                PolicyRule(\n                    api_groups=[\"\"],\n                    resources=[\"configmaps\"],\n                    verbs=[\"get\", \"list\", \"watch\"],\n                ),\n                PolicyRule(\n                    api_groups=[\"\"],\n                    resources=[\"secrets\"],\n                    resource_names=[f\"{APP_NAME}-secrets\"],\n                    verbs=[\"get\"],\n                ),\n            ],\n        )\n    )\n)\n\n# Bind Role to ServiceAccount\nmanifest.add(\n    build_rolebinding(\n        RoleBindingSpec(\n            name=f\"{APP_NAME}-rolebinding\",\n            namespace=NAMESPACE,\n            subjects=[\n                RoleBindingSubject(\n                    kind=\"ServiceAccount\",\n                    name=APP_NAME,\n                    namespace=NAMESPACE,\n                ),\n            ],\n            role_ref=RoleRef(\n                kind=\"Role\",\n                name=f\"{APP_NAME}-role\",\n            ),\n        )\n    )\n)\n\nprint(manifest.to_yaml())\n</code></pre>"},{"location":"guides/rbac/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/rbac/#read-only-access-to-a-namespace","title":"Read-only access to a namespace","text":"<pre><code>role = build_role(\n    RoleSpec(\n        name=\"namespace-viewer\",\n        namespace=\"production\",\n        rules=[\n            PolicyRule(\n                api_groups=[\"\", \"apps\", \"batch\"],\n                resources=[\"*\"],\n                verbs=[\"get\", \"list\", \"watch\"],\n            ),\n        ],\n    )\n)\n</code></pre>"},{"location":"guides/rbac/#cicd-deployment-permissions","title":"CI/CD deployment permissions","text":"<pre><code>role = build_role(\n    RoleSpec(\n        name=\"deployer\",\n        namespace=\"production\",\n        rules=[\n            PolicyRule(\n                api_groups=[\"apps\"],\n                resources=[\"deployments\", \"statefulsets\", \"daemonsets\"],\n                verbs=[\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\"],\n            ),\n            PolicyRule(\n                api_groups=[\"\"],\n                resources=[\"services\", \"configmaps\"],\n                verbs=[\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\"],\n            ),\n            PolicyRule(\n                api_groups=[\"networking.k8s.io\"],\n                resources=[\"ingresses\"],\n                verbs=[\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\"],\n            ),\n        ],\n    )\n)\n</code></pre>"},{"location":"guides/web-app/","title":"Production Web App","text":"<p>This guide demonstrates generating a complete set of Kubernetes resources for a production web application with:</p> <ul> <li>ServiceAccount</li> <li>ConfigMap (application configuration)</li> <li>Secret (database credentials)</li> <li>Deployment (with probes, resources, security context, affinity)</li> <li>Service</li> <li>HorizontalPodAutoscaler</li> <li>PodDisruptionBudget</li> </ul>"},{"location":"guides/web-app/#setup","title":"Setup","text":"<p>First, define your application configuration:</p> <pre><code>from k8smith import (\n    Container,\n    ContainerPort,\n    DeploymentSpec,\n    EnvVar,\n    Manifest,\n    PodSpec,\n    PodTemplateSpec,\n    Probe,\n    ResourceQuantity,\n    ResourceRequirements,\n    ServicePort,\n    ServiceSpec,\n    Toleration,\n    Volume,\n    VolumeMount,\n    build_configmap,\n    build_deployment,\n    build_hpa,\n    build_pdb,\n    build_secret,\n    build_service,\n    build_serviceaccount,\n)\nfrom k8smith.core.models import (\n    ConfigMapSpec,\n    HPASpec,\n    PDBSpec,\n    PodSecurityContext,\n    SecretSpec,\n    SecurityContext,\n    ServiceAccountSpec,\n)\n\nAPP_NAME = \"api-server\"\nNAMESPACE = \"production\"\nIMAGE = \"mycompany/api-server:v1.2.3\"\nREPLICAS = 3\n\nCOMMON_LABELS = {\n    \"app.kubernetes.io/name\": APP_NAME,\n    \"app.kubernetes.io/component\": \"backend\",\n    \"app.kubernetes.io/part-of\": \"myapp\",\n    \"app.kubernetes.io/managed-by\": \"k8smith\",\n}\n\nSELECTOR = {\"app.kubernetes.io/name\": APP_NAME}\n</code></pre>"},{"location":"guides/web-app/#serviceaccount","title":"ServiceAccount","text":"<p>Create a ServiceAccount for the application:</p> <pre><code>def create_service_account() -&gt; dict:\n    return build_serviceaccount(\n        ServiceAccountSpec(\n            name=APP_NAME,\n            namespace=NAMESPACE,\n            labels=COMMON_LABELS,\n        )\n    )\n</code></pre>"},{"location":"guides/web-app/#configmap","title":"ConfigMap","text":"<p>Store application configuration in a ConfigMap:</p> <pre><code>def create_configmap() -&gt; dict:\n    return build_configmap(\n        ConfigMapSpec(\n            name=f\"{APP_NAME}-config\",\n            namespace=NAMESPACE,\n            labels=COMMON_LABELS,\n            data={\n                \"config.yaml\": \"\"\"\\\nserver:\n  port: 8080\n  read_timeout: 30s\n  write_timeout: 30s\n\nlogging:\n  level: info\n  format: json\n\nfeatures:\n  rate_limiting: true\n  caching: true\n\"\"\",\n                \"LOG_LEVEL\": \"info\",\n                \"CACHE_TTL\": \"300\",\n            },\n        )\n    )\n</code></pre>"},{"location":"guides/web-app/#secret","title":"Secret","text":"<p>Store sensitive data in a Secret:</p> <pre><code>def create_secret() -&gt; dict:\n    return build_secret(\n        SecretSpec(\n            name=f\"{APP_NAME}-secrets\",\n            namespace=NAMESPACE,\n            labels=COMMON_LABELS,\n            type=\"Opaque\",\n            string_data={\n                \"DATABASE_URL\": \"postgres://user:password@db.example.com:5432/myapp\",\n                \"API_KEY\": \"super-secret-api-key\",\n            },\n        )\n    )\n</code></pre> <p>Warning</p> <p>In production, use external secret management (e.g., GCP Secret Manager, HashiCorp Vault) instead of storing secrets in manifests.</p>"},{"location":"guides/web-app/#deployment","title":"Deployment","text":"<p>Create a production-ready Deployment with all best practices:</p> <pre><code>def create_deployment() -&gt; dict:\n    return build_deployment(\n        DeploymentSpec(\n            name=APP_NAME,\n            namespace=NAMESPACE,\n            replicas=REPLICAS,\n            labels=COMMON_LABELS,\n            selector=SELECTOR,\n            strategy={\n                \"type\": \"RollingUpdate\",\n                \"rollingUpdate\": {\n                    \"maxSurge\": \"25%\",\n                    \"maxUnavailable\": 0,\n                },\n            },\n            template=PodTemplateSpec(\n                metadata={\n                    \"labels\": COMMON_LABELS,\n                    \"annotations\": {\n                        \"prometheus.io/scrape\": \"true\",\n                        \"prometheus.io/port\": \"8080\",\n                        \"prometheus.io/path\": \"/metrics\",\n                    },\n                },\n                spec=PodSpec(\n                    service_account_name=APP_NAME,\n                    security_context=PodSecurityContext(\n                        run_as_non_root=True,\n                        run_as_user=1000,\n                        run_as_group=1000,\n                        fs_group=1000,\n                    ),\n                    containers=[\n                        Container(\n                            name=APP_NAME,\n                            image=IMAGE,\n                            image_pull_policy=\"IfNotPresent\",\n                            ports=[\n                                ContainerPort(container_port=8080, name=\"http\"),\n                            ],\n                            env=[\n                                # From ConfigMap\n                                EnvVar(\n                                    name=\"LOG_LEVEL\",\n                                    value_from={\n                                        \"configMapKeyRef\": {\n                                            \"name\": f\"{APP_NAME}-config\",\n                                            \"key\": \"LOG_LEVEL\",\n                                        }\n                                    },\n                                ),\n                                # From Secret\n                                EnvVar(\n                                    name=\"DATABASE_URL\",\n                                    value_from={\n                                        \"secretKeyRef\": {\n                                            \"name\": f\"{APP_NAME}-secrets\",\n                                            \"key\": \"DATABASE_URL\",\n                                        }\n                                    },\n                                ),\n                                # Downward API\n                                EnvVar(\n                                    name=\"POD_NAME\",\n                                    value_from={\"fieldRef\": {\"fieldPath\": \"metadata.name\"}},\n                                ),\n                            ],\n                            resources=ResourceRequirements(\n                                requests=ResourceQuantity(cpu=\"100m\", memory=\"256Mi\"),\n                                limits=ResourceQuantity(memory=\"512Mi\"),\n                            ),\n                            volume_mounts=[\n                                VolumeMount(\n                                    name=\"config\",\n                                    mount_path=\"/etc/app\",\n                                    read_only=True,\n                                ),\n                            ],\n                            liveness_probe=Probe(\n                                http_get={\"path\": \"/healthz\", \"port\": 8080},\n                                initial_delay_seconds=15,\n                                period_seconds=20,\n                                timeout_seconds=5,\n                                failure_threshold=3,\n                            ),\n                            readiness_probe=Probe(\n                                http_get={\"path\": \"/ready\", \"port\": 8080},\n                                initial_delay_seconds=5,\n                                period_seconds=10,\n                                timeout_seconds=3,\n                                failure_threshold=3,\n                            ),\n                            security_context=SecurityContext(\n                                allow_privilege_escalation=False,\n                                read_only_root_filesystem=True,\n                                capabilities={\"drop\": [\"ALL\"]},\n                            ),\n                        ),\n                    ],\n                    volumes=[\n                        Volume(\n                            name=\"config\",\n                            config_map={\"name\": f\"{APP_NAME}-config\"},\n                        ),\n                    ],\n                    tolerations=[\n                        Toleration(\n                            key=\"dedicated\",\n                            operator=\"Equal\",\n                            value=\"web\",\n                            effect=\"NoSchedule\",\n                        ),\n                    ],\n                    affinity={\n                        \"podAntiAffinity\": {\n                            \"preferredDuringSchedulingIgnoredDuringExecution\": [\n                                {\n                                    \"weight\": 100,\n                                    \"podAffinityTerm\": {\n                                        \"labelSelector\": {\"matchLabels\": SELECTOR},\n                                        \"topologyKey\": \"kubernetes.io/hostname\",\n                                    },\n                                }\n                            ]\n                        }\n                    },\n                ),\n            ),\n        )\n    )\n</code></pre>"},{"location":"guides/web-app/#service","title":"Service","text":"<p>Expose the application with a ClusterIP Service:</p> <pre><code>def create_service() -&gt; dict:\n    return build_service(\n        ServiceSpec(\n            name=APP_NAME,\n            namespace=NAMESPACE,\n            labels=COMMON_LABELS,\n            selector=SELECTOR,\n            ports=[\n                ServicePort(port=80, target_port=8080, name=\"http\"),\n            ],\n            type=\"ClusterIP\",\n        )\n    )\n</code></pre>"},{"location":"guides/web-app/#horizontalpodautoscaler","title":"HorizontalPodAutoscaler","text":"<p>Configure auto-scaling based on CPU and memory:</p> <pre><code>def create_hpa() -&gt; dict:\n    return build_hpa(\n        HPASpec(\n            name=APP_NAME,\n            namespace=NAMESPACE,\n            labels=COMMON_LABELS,\n            scale_target_ref={\n                \"apiVersion\": \"apps/v1\",\n                \"kind\": \"Deployment\",\n                \"name\": APP_NAME,\n            },\n            min_replicas=REPLICAS,\n            max_replicas=10,\n            metrics=[\n                {\n                    \"type\": \"Resource\",\n                    \"resource\": {\n                        \"name\": \"cpu\",\n                        \"target\": {\"type\": \"Utilization\", \"averageUtilization\": 70},\n                    },\n                },\n                {\n                    \"type\": \"Resource\",\n                    \"resource\": {\n                        \"name\": \"memory\",\n                        \"target\": {\"type\": \"Utilization\", \"averageUtilization\": 80},\n                    },\n                },\n            ],\n            behavior={\n                \"scaleDown\": {\n                    \"stabilizationWindowSeconds\": 300,\n                    \"policies\": [{\"type\": \"Percent\", \"value\": 10, \"periodSeconds\": 60}],\n                },\n                \"scaleUp\": {\n                    \"stabilizationWindowSeconds\": 0,\n                    \"policies\": [\n                        {\"type\": \"Percent\", \"value\": 100, \"periodSeconds\": 15},\n                        {\"type\": \"Pods\", \"value\": 4, \"periodSeconds\": 15},\n                    ],\n                    \"selectPolicy\": \"Max\",\n                },\n            },\n        )\n    )\n</code></pre>"},{"location":"guides/web-app/#poddisruptionbudget","title":"PodDisruptionBudget","text":"<p>Ensure high availability during node maintenance:</p> <pre><code>def create_pdb() -&gt; dict:\n    return build_pdb(\n        PDBSpec(\n            name=APP_NAME,\n            namespace=NAMESPACE,\n            labels=COMMON_LABELS,\n            selector=SELECTOR,\n            min_available=2,\n        )\n    )\n</code></pre>"},{"location":"guides/web-app/#putting-it-all-together","title":"Putting It All Together","text":"<pre><code>def main():\n    manifest = Manifest()\n\n    # Add resources in dependency order\n    manifest.add(create_service_account())\n    manifest.add(create_configmap())\n    manifest.add(create_secret())\n    manifest.add(create_deployment())\n    manifest.add(create_service())\n    manifest.add(create_hpa())\n    manifest.add(create_pdb())\n\n    # Output YAML\n    print(manifest.to_yaml())\n\nif __name__ == \"__main__\":\n    main()\n</code></pre> <p>Run with:</p> <pre><code>python generate.py &gt; manifests/web-app.yaml\nkubectl apply -f manifests/web-app.yaml\n</code></pre>"}]}